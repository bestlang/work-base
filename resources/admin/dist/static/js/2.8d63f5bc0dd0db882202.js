webpackJsonp([2],{Pvz1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("pFkg");var i={data:function(){return{total:0,params:{page:1,page_size:10},tableData:[]}},computed:{types:function(){return this.$store.getters.activityTypes}},methods:{handleEdit:function(t){this.$router.push("/activity/edit?activityId="+t.id)},handleDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.$http.post("/admin/activity/delete",{activityId:t.id}).then(function(t){"200"==t.statusCode&&(e.$message({type:"success",message:"删除成功!"}),e.loadActivities())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addActivity:function(){this.$router.push("/activity/add")},handleCurrentChange:function(t){this.params.page=t,this.loadActivities()},loadActivities:function(){var t=this;this.$http.get("/admin/activity/list",{params:this.params}).then(function(e){t.tableData=e.data.activities})},loadPage:function(){var t=this;this.$http.get("/admin/activity/page",{params:this.params}).then(function(e){t.total=e.data.total,console.log("this.total",t.total)})}},mounted:function(){this.loadActivities(),this.loadPage()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-buttons"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addActivity}},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" 添加")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"cell-class-name":"cell-class","header-cell-class-name":"cell-class"}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table-img",attrs:{src:t.row.thumbnail,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.types,function(i,n){return i.id==e.row.type?a("div",[t._v(t._s(i.name))]):t._e()})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"l-delimiter"}),t._v(" "),a("el-pagination",{attrs:{"current-page":t.params.page,"page-size":t.params.page_size,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)}}})],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(t){a("qi9c")},"data-v-66c221db",null);e.default=s.exports},qi9c:function(t,e){}});
//# sourceMappingURL=2.8d63f5bc0dd0db882202.js.map