<!DOCTYPE html>
<html class="">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>    一段搜索代码
</title>
    <meta name="keywords" content="laraCms"/>
    <meta name="generator" content="laraCms"/>
    <meta name="description" content=""/>
    <meta name="csrf-token" content="0RVHRRaPxSWol7dmXeIiI77Lj5Rr5zXaY3zVsbN8">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link href="https://unpkg.zhimg.com/normalize.css@8.0.1/normalize.css" rel="stylesheet">
    <link href="https://unpkg.zhimg.com/bootstrap@3.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.zhimg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" media="screen" href="/vendor/laracms/dark/front.css" />
    <style>
    code{
        line-height: 26px;
        font-family: Monaco,Menlo,Consolas,"Courier New",monospace;
    }
    pre{
        border-radius: 0;
        background: #fff;
        padding: 0;
        border: none;
        max-height: 99999px!important;
    }
    #comment_submit{
        margin-top: 10px;
    }
</style>
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcdn.net/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/respond.js/1.4.0/respond.min.js"></script>
    <![endif]-->
    <style>
        .container{
            padding: 0;
        }
        @media (min-width: 1400px) {
            .container {
                width: 100%;
            }
        }
        body{
            padding-top: 0;
        }
    </style>

</head>
<body class="group-page">
<header class="header">
    
        

            
                
                    
                    
                    
                    
                
                
            

            
                
                    
                        
                        
                        
                    
                    
                        
                        
                            
                            
                            
                            
                            
                        
                    
                    
                        
                        
                            
                        
                    
                    
                        
                    
                    
                        
                    
                
                
                    
                        
                        
                    
                
                
                    
                        
                            
                            
                                
                            
                        
                    
                    
                        
                            
                        
                        
                            
                            
                            
                                
                            
                            
                                
                                    
                                
                                
                                    
                                            
                                        
                                
                                
                                                     
                                        
                                    
                                    
                                        
                                    
                                
                             
                        
                    
                
            

        
    

</header>    
    <link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/monokai-sublime.css">
    
    <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.3.1/highlight.min.js"></script>
    <div class="l-content">
            <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default article-content">
                        <div class="panel-heading">
                            <ol class="breadcrumb">
                                                                <li><a href="http://127.0.0.1:8000/cms">首页</a></li>
                                                                <li><a href="http://127.0.0.1:8000/channel/6">技术组博客</a></li>
                                                                <li><a href="http://127.0.0.1:8000/channel/21">大后端</a></li>
                                                                <li>正文</li>
                            </ol>
                        </div>
                        <div class="l-article-body">
                            <h1 class="l-content-title">一段搜索代码</h1>
                            <div><pre class="brush:php;toolbar:false">class&nbsp;SearchController&nbsp;extends&nbsp;Controller{

&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;contents($keyword,&nbsp;Request&nbsp;$request)
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$contents&nbsp;=&nbsp;Content::query()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;where(&#39;title&#39;,&#39;like&#39;,&nbsp;&quot;%{$keyword}%&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;orWhere(&#39;description&#39;,&nbsp;&#39;like&#39;,&nbsp;&quot;%{$keyword}%&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;orWhere(&#39;keywords&#39;,&nbsp;&#39;like&#39;,&nbsp;&quot;%{$keyword}%&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;with([&#39;metas&#39;,&nbsp;&#39;tags&#39;])-&gt;get();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;render(&#39;search.search&#39;,&nbsp;[&#39;keyword&#39;&nbsp;=&gt;&nbsp;$keyword,&nbsp;&#39;contents&#39;=&gt;&nbsp;$contents]);
&nbsp;&nbsp;&nbsp;&nbsp;}
}</pre><p><br/></p></div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" id="comments">
                            <h3 class="panel-title">评论列表</h3>
                        </div>
                        <div class="panel-body">
                            <div>
                                                            </div>
                                                                                        <a href="http://127.0.0.1:8000/login" class="l-a">登录</a>之后发表评论
                                                                                                            </div>
                    </div>
                </div>
                
                    
                        
                        
                            
                                
                                    
                                    
                                        
                                    
                                
                            
                        
                    
                    
                        
                        
                            
                                
                                    
                                    
                                        
                                    
                                
                            
                        
                    
                
            </div>
            </div>

    </div>
<script src="https://unpkg.zhimg.com/jquery@2.2.4/dist/jquery.min.js"></script>
<script src="https://unpkg.zhimg.com/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>
<script src="https://unpkg.zhimg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.zhimg.com/swiper/swiper-bundle.min.js"></script>
<script>
    if(window.axios){
        window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
    }
    var token = document.head.querySelector('meta[name="csrf-token"]');
    if (token) {
        window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;
    }
</script>
<script type="text/javascript">
    $(function(){
        var allPreTags = document.getElementsByTagName("pre");
        for(var i = 0; i < allPreTags.length; i++)
        {
            var item = document.getElementsByTagName("pre")[i];
            var itemCode = document.getElementsByTagName("pre")[i].innerHTML;
            item.innerHTML = '<code>'+itemCode+'</code>';
        }
        hljs.initHighlightingOnLoad()
        $('#comment_submit').click(function(){
            const content = $('#comment').val();
            const contend_id = $('#content_id').val();

            axios.post('/comment/save', {content: content, content_id:contend_id}).then(function(response){
                let res = response.data;
                if(res.success){
                    alert('评论成功')
                    location.reload()
                }else{
                    alert(JSON.stringify(res.error))
                }
            })
        });
    });
</script>
</body>
</html>