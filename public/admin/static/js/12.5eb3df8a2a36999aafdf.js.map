{"version":3,"sources":["webpack:///src/pages/sniper/employee/basic/departmentEdit.vue","webpack:///./src/pages/sniper/employee/basic/departmentEdit.vue?8781","webpack:///./src/pages/sniper/employee/basic/departmentEdit.vue"],"names":["departmentEdit","components","TreeSelect","vue_treeselect_cjs_default","a","data","value","form","id","name","parent_id","manager","departments","watch","defineProperty_default","val","_this","this","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","getDepartmentDetail","stop","methods","_this2","_callee2","_ref","_context2","api","sniperGetDepartmentDetail","sent","normalizer","node","label","children","viewDepartments","$router","push","save","_this3","_callee3","res","_context3","saveDepartment","hasError","showMessage","error","getDepartments","_this4","_callee4","root","_context4","sniperGetDepartmentsTreeSelect","values_default","removeEmptyChildren","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","err","return","_this5","_callee5","_context5","sniperSaveDepartment","abrupt","mounted","_this6","_callee6","_context6","parseInt","$route","query","basic_departmentEdit","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","_v","staticClass","staticStyle","cursor","on","click","attrs","type","ref","width","overflow-y","model","label-width","callback","$$v","$set","multiple","options","default-expand-level","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.5eb3df8a2a36999aafdf.js","sourcesContent":["<template>\r\n    <div>\r\n        <div v-title=\"'新增部门'\"></div>\r\n        <div class=\"l-block\">\r\n            <div class=\"l-block-header\">\r\n                <div class=\"l-flex\">\r\n                    <span>员工系统 / <span @click=\"viewDepartments\" style=\"cursor: pointer;\">部门管理</span> / 新增部门</span>\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"l-block-body\">\r\n\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" style=\"width: 50%;overflow-y: visible\">\r\n                    <el-form-item label=\"部门名称\">\r\n                        <el-input v-model=\"form.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"上级部门\">\r\n                        <tree-select v-model=\"form.parent_id\" :multiple=\"false\" :options=\"departments\"  :default-expand-level=\"10\" :normalizer=\"normalizer\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"经    理\">\r\n                        <el-input v-model=\"form.manager\"></el-input>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import api from '@/api/index'\r\n    import TreeSelect from '@riophae/vue-treeselect'\r\n    import '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\n    export default {\r\n        components: { TreeSelect },\r\n        data(){\r\n            return {\r\n                value: null,\r\n                form: {\r\n                    id: 0,\r\n                    name: '',\r\n                    parent_id: null,\r\n                    manager: '',\r\n                },\r\n                departments: [],\r\n            }\r\n        },\r\n        watch:{\r\n           async  ['form.id'](val){\r\n                await this.getDepartmentDetail(val)\r\n            }\r\n        },\r\n        methods:{\r\n            async getDepartmentDetail(id){\r\n                let {data} = await api.sniperGetDepartmentDetail({id});\r\n                this.form.id = data.id\r\n                this.form.name = data.name\r\n                this.form.parent_id = data.parent_id\r\n                this.form.manager = data.manager\r\n            },\r\n            //tree select 节点数据适应\r\n            normalizer(node) {\r\n                return {\r\n                    id: node.id,\r\n                    label: node.name,\r\n                    children: node.children,\r\n                }\r\n            },\r\n            viewDepartments(){\r\n                this.$router.push('/sniper/employee/department')\r\n            },\r\n            async save(){\r\n                let res = await this.saveDepartment()\r\n                if(res.hasError){\r\n                    this.showMessage(res.error)\r\n                }else{\r\n                    this.showMessage('添加成功！', 'success')\r\n                    this.$router.push('/sniper/employee/department')\r\n                }\r\n            },\r\n            async getDepartments(){\r\n                let res = await api.sniperGetDepartmentsTreeSelect()\r\n                let root = Object.values(res.data)[0]\r\n                //处理数据 适应TreeSelect组件\r\n                const removeEmptyChildren = function(data){\r\n                    if(!data.children.length){\r\n                        data.children = undefined\r\n                    }else{\r\n                        for(let child of data.children){\r\n                            removeEmptyChildren(child)\r\n                        }\r\n                    }\r\n                }\r\n                removeEmptyChildren(root)\r\n                this.departments = [root]\r\n            },\r\n            async saveDepartment(){\r\n                let res = await api.sniperSaveDepartment(this.form)\r\n                return res\r\n            }\r\n        },\r\n        async mounted(){\r\n            this.getDepartments()\r\n            this.form.id = parseInt(this.$route.query.id) || 0;\r\n            let parent_id = parseInt(this.$route.query.parent_id) || 0;\r\n            if(parent_id){\r\n                this.form.parent_id = parent_id\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-form-item__content  /deep/  .vue-treeselect__menu-container{\r\n    z-index: 9999;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/sniper/employee/basic/departmentEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"title\",rawName:\"v-title\",value:('新增部门'),expression:\"'新增部门'\"}]}),_vm._v(\" \"),_c('div',{staticClass:\"l-block\"},[_c('div',{staticClass:\"l-block-header\"},[_c('div',{staticClass:\"l-flex\"},[_c('span',[_vm._v(\"员工系统 / \"),_c('span',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":_vm.viewDepartments}},[_vm._v(\"部门管理\")]),_vm._v(\" / 新增部门\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"l-block-body\"},[_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"50%\",\"overflow-y\":\"visible\"},attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"部门名称\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上级部门\"}},[_c('tree-select',{attrs:{\"multiple\":false,\"options\":_vm.departments,\"default-expand-level\":10,\"normalizer\":_vm.normalizer},model:{value:(_vm.form.parent_id),callback:function ($$v) {_vm.$set(_vm.form, \"parent_id\", $$v)},expression:\"form.parent_id\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"经    理\"}},[_c('el-input',{model:{value:(_vm.form.manager),callback:function ($$v) {_vm.$set(_vm.form, \"manager\", $$v)},expression:\"form.manager\"}})],1)],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73ad6860\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/sniper/employee/basic/departmentEdit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73ad6860\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./departmentEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./departmentEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./departmentEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73ad6860\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./departmentEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-73ad6860\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/sniper/employee/basic/departmentEdit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}