{"version":3,"sources":["webpack:///src/components/attachment.vue","webpack:///./src/components/attachment.vue?92ff","webpack:///./src/components/attachment.vue","webpack:///src/pages/cms/content/add.vue","webpack:///./src/pages/cms/content/add.vue?a040","webpack:///./src/pages/cms/content/add.vue"],"names":["attachment","props","data","accessToken","localStorage","getItem","uploadUrl","this","SITE_URL","Object","util","headers","Authorization","X-CSRF-TOKEN","$store","getters","$types","CSRF","disabled","vals","updated","methods","handlePreview","beforeRemove","file","fileList","$confirm","name","preview","window","open","response","handleRemove","filter","item","url","$emit","uploadSuccess","concat","toConsumableArray_default","mounted","value","components_attachment","render","_vm","_h","$createElement","_c","_self","attrs","on-preview","action","on-remove","before-remove","on-success","multiple","file-list","show-file-list","size","type","_v","staticClass","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","add","checkList","showSwitch","contents","formTitle","form","positions","ueditorConfig","ueditor","contentPositions","channel_id","components","channel-tree","channelTree","VueUeditorWrap","vue_ueditor_wrap_min_default","a","imageUpload","multipleImageUpload","computed","extends_default","vuex_esm","watch","val","_this","asyncToGenerator_default","regenerator_default","mark","_callee","_ref","wrap","_context","prev","next","api","getCmsChannelWhole","id","sent","dispatch","CMS_CURRENT_CHANNEL","loadModel","model_id","stop","goback","$router","push","saveContent","_this2","_callee2","_context2","$set","currentModel","currentChannel","success","$message","message","handleNodeClick","node","_this3","_callee3","channel","_context3","CMS_PARENT_CHANNEL","model","loadContentPositions","_this4","_callee4","res","idx","_context4","getModel","fields","is_channel","CMS_CURRENT_MODEL","field","_this5","arguments","length","undefined","_callee5","_context5","abrupt","getContentPositions","_this6","_callee6","_context6","parseInt","$route","query","content_add","directives","rawName","expression","title","selectedKey","on","nodeClick","click","direction","staticStyle","font-weight","_s","label-width","_l","index","label","key","callback","$$v","_e","Array","isArray","option","config"],"mappings":"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","file":"static/js/4.b372bbd598a755ead87d.js","sourcesContent":["<template>\n    <el-upload\n            class=\"\"\n            :on-preview=\"handlePreview\"\n            :action=\"uploadUrl\"\n            :on-remove=\"handleRemove\"\n            :before-remove=\"beforeRemove\"\n            :on-success=\"uploadSuccess\"\n            multiple\n            :file-list=\"vals\"\n            name=\"file\"\n            :show-file-list=\"false\"\n            :headers=\"headers\"\n    >\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\"></div>\n    </el-upload>\n</template>\n<script>\n    import { getPrefix } from '../api/util'\n\n    export default {\n        props:['value'],\n        data(){\n            let accessToken = localStorage.getItem('accessToken');\n            return {\n                uploadUrl: this.SITE_URL + '/' + getPrefix() + '/admin/file/upload',\n                headers: {\n                    'Authorization': 'Bearer ' + accessToken,\n                    'X-CSRF-TOKEN': this.$store.getters[this.$types.CSRF]\n                },\n                disabled: false,\n                vals: [],\n                updated: []\n            }\n        },\n        methods:{\n            handlePreview(){},\n            beforeRemove(file, fileList) {\n                return this.$confirm(`确定移除 ${ file.name }？`);\n            },\n            preview(file){\n                window.open(file.response.data.file)\n            },\n            handleRemove(file, fileList){\n                this.updated = this.vals.filter( item => { return item.url != file.url} );\n                this.$emit('input', this.updated)\n//                this.vals = updated\n            },\n            uploadSuccess(response, file, fileList){\n                const item = {name: file.name, url: response.data.file}\n                this.updated = [...this.vals, item]\n                this.$emit('input', this.updated)\n//                this.vals = updated\n            }\n        },\n        mounted: function () {\n            if(this.value){\n                this.vals = [...this.value]\n                this.updated = [...this.value]\n            }\n        }\n    }\n</script>\n<style scoped>\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/attachment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-upload',{attrs:{\"on-preview\":_vm.handlePreview,\"action\":_vm.uploadUrl,\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove,\"on-success\":_vm.uploadSuccess,\"multiple\":\"\",\"file-list\":_vm.vals,\"name\":\"file\",\"show-file-list\":false,\"headers\":_vm.headers}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a3cae25\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/attachment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a3cae25\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./attachment.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./attachment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./attachment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a3cae25\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./attachment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2a3cae25\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/attachment.vue\n// module id = null\n// module chunks = ","<style lang=\"less\" scoped>\n    .l-content-list{\n        display: flex;\n        flex-flow: row nowrap;\n        min-height: calc(100vh - 50px - 20px);\n        margin:-20px 0 -20px -20px;\n        overflow-x: hidden;\n        .l-tree-content{\n            padding: 20px;\n            flex-grow: 1;\n            display: flex;\n            flex-flow: row nowrap;\n            box-sizing: border-box;\n            width: calc(100% - 240px);\n        }\n    }\n</style>\n<template>\n    <div class=\"l-content-list\">\n        <div v-title=\"'内容管理'\"></div>\n        <channel-tree @nodeClick=\"handleNodeClick\" :title=\"'栏目选择'\" :selectedKey=\"channel_id\"></channel-tree>\n        <div class=\"l-tree-content\">\n            <div class=\"l-block\" v-if=\"currentModel\">\n                <div class=\"l-block-header\">\n                    <div>\n                        <span class=\"l-go-back\" @click=\"goback\"><span class=\"iconfont\">&#xe601;</span>返回</span>\n                        <el-divider direction=\"vertical\"></el-divider>\n                        <!--<i class=\"iconfont\">&#xe64c;</i>「」-->\n                        <span>在<span style=\"font-weight: 700\">“{{currentChannel.name}}”</span>下{{formTitle}}</span>\n                    </div>\n                </div>\n                <div class=\"l-block-body\">\n                    <el-form label-width=\"100px\">\n                        <template v-for=\"(item, index) in currentModel.fields\">\n\n                            <el-form-item v-if=\"item.type=='text'\" :label=\"item.label\">\n                                <el-input :key=\"index\" :name=\"item.field\" v-model=\"form[item.field]\"></el-input>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='checkbox' && Array.isArray(form[item.field])\" :label=\"item.label\">\n                                <el-checkbox-group v-model=\"form[item.field]\">\n                                    <el-checkbox :label=\"option.value\" v-for=\"option in item.extra\">{{option.name}}</el-checkbox>\n                                </el-checkbox-group>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='image'\" :label=\"item.label\">\n                                <image-upload v-model=\"form[item.field]\"></image-upload>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='multiple-image'\" :label=\"item.label\">\n                                <multiple-image-upload v-model=\"form[item.field]\"></multiple-image-upload>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='attachment'\" class=\"l-mb-22\" :label=\"item.label\">\n                                <div>\n                                    <attachment v-model=\"form[item.field]\"></attachment>\n                                </div>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='textarea'\" :label=\"item.label\">\n                                <el-input type=\"textarea\" v-model=\"form[item.field]\"></el-input>\n                            </el-form-item>\n\n                            <el-form-item v-if=\"item.type=='content'\" class=\"l-mb-22\" :label=\"item.label\">\n                                <div>\n                                    <vue-ueditor-wrap v-model=\"form[item.field]\" :config=\"ueditorConfig\"></vue-ueditor-wrap>\n                                </div>\n                            </el-form-item>\n\n\n                        </template>\n                        <el-form-item label=\"编辑推荐位\" v-if=\"contentPositions && contentPositions.length\">\n                            <el-checkbox-group  v-model=\"form['positions']\">\n                                <el-checkbox :label=\"option.id\" v-for=\"option in contentPositions\">{{option.name}}</el-checkbox>\n                            </el-checkbox-group>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button type=\"primary\" size=\"small\" @click=\"saveContent\">提交</el-button>\n                        </el-form-item>\n                    </el-form>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import channelTree from \"../components/channelTree\";\n    import VueUeditorWrap from 'vue-ueditor-wrap';\n    import ueditorConfig from \"../../../store/ueditor\";\n    import imageUpload from \"@/components/imageUpload\"\n    import multipleImageUpload from \"@/components/multipleImageUpload\"\n    import attachment from \"@/components/attachment\"\n    import {mapGetters} from 'vuex'\n    import api from '../../../api/index'\n\n    export default {\n        data() {\n            return {\n                checkList:[],\n                showSwitch: false,\n                contents: [],\n                formTitle: '添加内容',\n                form:{\n                    positions:[]\n                },\n                ueditorConfig: ueditorConfig,\n                contentPositions: [],\n                channel_id: 0\n            }\n        },\n        components:{\n            'channel-tree': channelTree,\n            VueUeditorWrap,\n            imageUpload,\n            multipleImageUpload,\n            attachment\n        },\n        computed:{\n            ...mapGetters([\n                'parentChannel',\n                'currentChannel',\n                'currentModel',\n            ]),\n        },\n        watch:{\n            async channel_id(val){\n                if(val){\n                    let {data} = await api.getCmsChannelWhole({id: val})\n                    this.$store.dispatch(this.$types.CMS_CURRENT_CHANNEL, data);\n                    await this.loadModel(data.model_id)\n                }\n            }\n        },\n        methods: {\n            goback(){\n                this.$router.push('/cms/content?channel_id='+this.channel_id)\n            },\n            async saveContent(){\n                if(!this.form.channel_id && !this.form.model_id){\n                    this.$set(this.form, 'model_id', this.currentModel.id);\n                    this.$set(this.form, 'channel_id', this.currentChannel.id)\n                }\n                let res = await api.saveContent(this.form)\n                if(res.success){\n                    this.$message({\n                        type: 'success',\n                        message: '添加成功!'\n                    });\n                    this.goback()\n                }\n            },\n\n            async handleNodeClick(node, ...params){\n                let channel = node[0]\n                this.channel_id = channel.id\n                this.$store.dispatch(this.$types.CMS_CURRENT_CHANNEL, channel);\n                this.$store.dispatch(this.$types.CMS_PARENT_CHANNEL, channel);\n                await this.loadModel(channel.model.id)\n                await this.loadContentPositions()\n            },\n            async loadModel(id){\n                let res = await api.getModel({id})\n                let currentModel = res.data;\n                // 过滤掉模型中属于栏目的字段\n                currentModel.fields = currentModel.fields.filter(item => { return !item.is_channel })\n                this.$store.dispatch(this.$types.CMS_CURRENT_MODEL, currentModel)\n                for(let idx in this.currentModel.fields){\n                    let item = this.currentModel.fields[idx];\n                    // 重置表单\n                    this.$set(this.form, item.field, '');\n                    if(item.type == 'checkbox' || item.type == 'multiple-image'){\n                        this.$set(this.form, item.field, []);\n                    }\n                }\n                this.$set(this.form, 'positions', [])\n            },\n            async loadContentPositions(channel_id=0){\n                if(!channel_id){\n                    if(this.currentChannel && this.currentChannel.id){\n                        channel_id = this.currentChannel.id;\n                    }\n                }\n                // 没有选定的栏目, 不进行[可选推荐位]的加载\n                if(!channel_id){\n                    return;\n                }\n                let res = await api.getContentPositions({channel_id})\n                this.contentPositions = res.data\n            }\n        },\n        async mounted() {\n            this.channel_id = parseInt(this.$route.query.channel_id || 0);\n            await this.loadContentPositions(this.channel_id);\n            this.$store.dispatch('collapse');\n        }\n    }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/cms/content/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-content-list\"},[_c('div',{directives:[{name:\"title\",rawName:\"v-title\",value:('内容管理'),expression:\"'内容管理'\"}]}),_vm._v(\" \"),_c('channel-tree',{attrs:{\"title\":'栏目选择',\"selectedKey\":_vm.channel_id},on:{\"nodeClick\":_vm.handleNodeClick}}),_vm._v(\" \"),_c('div',{staticClass:\"l-tree-content\"},[(_vm.currentModel)?_c('div',{staticClass:\"l-block\"},[_c('div',{staticClass:\"l-block-header\"},[_c('div',[_c('span',{staticClass:\"l-go-back\",on:{\"click\":_vm.goback}},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"在\"),_c('span',{staticStyle:{\"font-weight\":\"700\"}},[_vm._v(\"“\"+_vm._s(_vm.currentChannel.name)+\"”\")]),_vm._v(\"下\"+_vm._s(_vm.formTitle))])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"l-block-body\"},[_c('el-form',{attrs:{\"label-width\":\"100px\"}},[_vm._l((_vm.currentModel.fields),function(item,index){return [(item.type=='text')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-input',{key:index,attrs:{\"name\":item.field},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='checkbox' && Array.isArray(_vm.form[item.field]))?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-checkbox-group',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}},_vm._l((item.extra),function(option){return _c('el-checkbox',{attrs:{\"label\":option.value}},[_vm._v(_vm._s(option.name))])}),1)],1):_vm._e(),_vm._v(\" \"),(item.type=='image')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('image-upload',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='multiple-image')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('multiple-image-upload',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='attachment')?_c('el-form-item',{staticClass:\"l-mb-22\",attrs:{\"label\":item.label}},[_c('div',[_c('attachment',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1)]):_vm._e(),_vm._v(\" \"),(item.type=='textarea')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='content')?_c('el-form-item',{staticClass:\"l-mb-22\",attrs:{\"label\":item.label}},[_c('div',[_c('vue-ueditor-wrap',{attrs:{\"config\":_vm.ueditorConfig},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1)]):_vm._e()]}),_vm._v(\" \"),(_vm.contentPositions && _vm.contentPositions.length)?_c('el-form-item',{attrs:{\"label\":\"编辑推荐位\"}},[_c('el-checkbox-group',{model:{value:(_vm.form['positions']),callback:function ($$v) {_vm.$set(_vm.form, 'positions', $$v)},expression:\"form['positions']\"}},_vm._l((_vm.contentPositions),function(option){return _c('el-checkbox',{attrs:{\"label\":option.id}},[_vm._v(_vm._s(option.name))])}),1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.saveContent}},[_vm._v(\"提交\")])],1)],2)],1)]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c22f3826\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/cms/content/add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c22f3826\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c22f3826\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c22f3826\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/cms/content/add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}