webpackJsonp([17],{PaIR:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"l-block"},[l("div",{staticClass:"l-block-header"},[l("div",[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),l("div")]),t._v(" "),l("div",{staticClass:"l-block-body"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[l("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),l("el-table-column",{attrs:{prop:"channel_template_prefix",label:"栏目模板前缀"}}),t._v(" "),l("el-table-column",{attrs:{prop:"content_template_prefix",label:"内容模板前缀"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),l("el-button",{attrs:{type:"text"},on:{click:function(l){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),l("el-dialog",{attrs:{title:"添加类型",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[l("el-form",{attrs:{model:t.form}},[l("el-form-item",{attrs:{label:"类型","label-width":"100px"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"名称","label-width":"100px"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},o=l("VU/8")({data:function(){return{loading:!0,tableData:[],dialogFormVisible:!1,form:{name:"",type:""}}},methods:{handleAdd:function(){this.$store.dispatch(this.$types.CMS_CURRENT_MODEL,{}),this.$router.push("/cms/setting/model/add")},handleEdit:function(t){this.$store.dispatch(this.$types.CMS_CURRENT_MODEL,t),this.$router.push("/cms/setting/model/edit")},handleDelete:function(t){var e=this;this.$confirm("确定删除模型?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/admin/cms/model/delete",{id:t.id}).then(function(t){t.success?(e.loadModels(),e.$message({type:"success",message:"删除成功!"})):e.$message({type:"error",message:t.error})}).catch(function(){})})},add:function(){this.$router.push("/cms/setting/model/add")},submit:function(){var t=this;this.$http.post("/admin/cms/model/field/type/add",this.form).then(function(e){e.success?(t.loading=!0,t.loadModels(),t.dialogFormVisible=!1,t.$message({message:"添加成功!",type:"success"})):t.$message({message:e.error,type:"warning"})})},loadModels:function(){var t=this;this.$http.get("/admin/cms/model").then(function(e){t.loading=!1,t.tableData=e.data})}},created:function(){this.loadModels()}},a,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=17.7ce261adb2f45bce3218.js.map