{"version":3,"sources":["webpack:///src/pages/cms/components/channelTree.vue","webpack:///./src/pages/cms/components/channelTree.vue?9143","webpack:///./src/pages/cms/components/channelTree.vue","webpack:///src/components/imageUpload.vue","webpack:///./src/components/imageUpload.vue?7fd1","webpack:///./src/components/imageUpload.vue","webpack:///src/components/multipleImageUpload.vue","webpack:///./src/components/multipleImageUpload.vue?cce1","webpack:///./src/components/multipleImageUpload.vue","webpack:///src/pages/cms/content.vue","webpack:///./src/pages/cms/content.vue?5d7d","webpack:///./src/pages/cms/content.vue"],"names":["channelTree","data","customProps","children","label","computed","treeData","this","$store","getters","channels","methods","handleNodeClick","_len","arguments","length","params","Array","_key","$emit","mounted","dispatch","$types","CMS_CHANNELS","components_channelTree","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","icon-class","default-expand-all","node-key","props","expand-on-click-node","on","node-click","scopedSlots","_u","key","fn","node","_e","_v","_s","staticRenderFns","cms_components_channelTree","__webpack_require__","normalizeComponent","ssrContext","imageUpload","uploadUrl","SITE_URL","headers","Authorization","localStorage","getItem","uploadSuccess","response","file","fileList","components_imageUpload","action","on-success","list-type","show-file-list","name","src","value","src_components_imageUpload","imageUpload_normalizeComponent","multipleImageUpload","disabled","vals","preview","window","open","uploadRemove","filter","item","url","description","console","log","stringify_default","push","_this","$nextTick","components_multipleImageUpload","on-preview","on-remove","multiple","file-list","size","type","slot","src_components_multipleImageUpload","multipleImageUpload_normalizeComponent","cms_content","checkList","showSwitch","contents","showForm","formTitle","form","positions","ueditorConfig","ueditor","contentPositions","components","channel-tree","VueUeditorWrap","vue_ueditor_wrap_min_default","a","extends_default","Object","vuex_esm","watch","currentChannel","val","oldVal","loadContents","goback","editContent","row","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","CMS_CURRENT_CHANNEL","channel","CMS_PARENT_CHANNEL","loadContentPositions","channel_id","loadWholeContent","stop","deleteContent","_this2","$confirm","confirmButtonText","cancelButtonText","then","$http","post","id","res","$message","message","catch","saveContent","_this3","model_id","$set","currentModel","success","_this4","_callee2","_context2","addContent","loadModel","_this5","get","idx","fields","is_channel","CMS_CURRENT_MODEL","field","_this6","_ref","_this7","_callee3","content","contentFields","_context3","sent","model","forEach","metas","_this8","undefined","_callee4","_context4","abrupt","pages_cms_content","directives","rawName","expression","nodeClick","parentChannel","hasOwnProperty","click","staticStyle","width","prop","scope","$event","direction","label-width","_l","index","callback","$$v","isArray","option","config","content_Component","content_normalizeComponent","__webpack_exports__"],"mappings":"4PAkCAA,GACAC,KADA,WAEA,OACAC,aACAC,SAAA,WACAC,MAAA,UAIAC,UACAC,SADA,WAEA,OAAAC,KAAAC,OAAAC,QAAAC,WAGAC,SACAC,gBADA,WACA,QAAAC,EAAAC,UAAAC,OAAAC,EAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GACAX,KAAAY,MAAA,YAAAH,KAGAI,QAnBA,WAoBAb,KAAAC,OAAAa,SAAA,eACAd,KAAAC,OAAAa,SAAAd,KAAAe,OAAAC,gBCjDeC,GADEC,OALjB,WAA0B,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,sBAAgCF,EAAA,WAAgBG,IAAA,OAAAC,OAAkBC,aAAA,sBAAAC,sBAAA,EAAAlC,KAAAyB,EAAApB,SAAA8B,WAAA,KAAAC,MAAAX,EAAAxB,YAAAoC,wBAAA,GAAsJC,IAAKC,aAAAd,EAAAd,iBAAiC6B,YAAAf,EAAAgB,KAAsBC,IAAA,UAAAC,GAAA,SAAAZ,GAC9X,IAAAa,EAAAb,EAAAa,KACA5C,EAAA+B,EAAA/B,KACA,OAAA4B,EAAA,QAAkBE,YAAA,qBAA+BF,EAAA,QAAA5B,EAAAE,SAAAY,OAAuEW,EAAAoB,KAAvEjB,EAAA,QAAgDE,YAAA,aAAuBL,EAAAqB,GAAA,OAAArB,EAAAqB,GAAArB,EAAAsB,GAAAH,EAAAzC,mBAA4D,IAEnK6C,oBCFjB,IAuBeC,EAvBUC,EAAQ,OAcjCC,CACEpD,EACAwB,GATF,EAVA,SAAA6B,GACEF,EAAQ,SAaV,KAEA,MAUgC,yCCThCG,GACAjB,OAAA,SACApC,KAFA,WAGA,OACAsD,UAAAhD,KAAAiD,SAAA,yBACAC,SACAC,cAAA,UAAAC,aAAAC,QAAA,kBAIAjD,SACAkD,cADA,SACAC,EAAAC,EAAAC,GACAzD,KAAAY,MAAA,QAAA2C,EAAA7D,KAAA8D,SC1BeE,GADExC,OAFP,WAAgB,IAAaE,EAAbpB,KAAaqB,eAA0BC,EAAvCtB,KAAuCuB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,aAAuBE,YAAA,kBAAAE,OAAqCiC,OAA3H3D,KAA2HgD,UAAAY,aAA3H5D,KAA2HsD,cAAAO,YAAA,eAAAC,kBAAA,EAAAC,KAAA,OAAAb,QAA3HlD,KAA2HkD,WAA3HlD,KAAwQ,MAAAsB,EAAA,OAAwBE,YAAA,SAAAE,OAA4BsC,IAA5ThE,KAA4TiE,SAAiB3C,EAAA,KAAUE,YAAA,yCAEjVkB,oBCChC,IAuBewB,EAvBUtB,EAAQ,OAcjBuB,CACdpB,EACAW,GAT6B,EAV/B,SAAoBZ,GAClBF,EAAQ,SAaS,KAEU,MAUG,6BCPhCwB,GACAtC,OAAA,SACApC,KAFA,WAGA,OACAsD,UAAAhD,KAAAiD,SAAA,yBACAC,SACAC,cAAA,UAAAC,aAAAC,QAAA,gBAEAgB,UAAA,EACAC,UAGAlE,SACAmE,QADA,SACAf,GACAgB,OAAAC,KAAAjB,EAAAD,SAAA7D,KAAA8D,OAEAkB,aAJA,SAIAlB,GACAxD,KAAAsE,KAAAtE,KAAAsE,KAAAK,OAAA,SAAAC,GAAA,OAAAA,EAAAC,KAAArB,EAAAD,SAAA7D,KAAA8D,OACAxD,KAAAY,MAAA,QAAAZ,KAAAsE,OAEAhB,cARA,SAQAC,EAAAC,EAAAC,GACA,IAAAmB,GAAAE,YAAA,GAAAD,IAAAtB,EAAA7D,KAAA8D,MACAuB,QAAAC,IAAAC,IAAAL,IACA5E,KAAAsE,KAAAY,KAAAN,GACAG,QAAAC,IAAAC,IAAAjF,KAAAsE,OACAtE,KAAAY,MAAA,QAAAZ,KAAAsE,QAGAzD,QAAA,eAAAsE,EAAAnF,KACAA,KAAAoF,UAAA,WACAD,EAAAb,KAAAa,EAAAlB,UC9CeoB,GADEnE,OAFP,WAAgB,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,aAAuBI,OAAO4D,aAAAnE,EAAAoD,QAAAZ,OAAAxC,EAAA6B,UAAAuC,YAAApE,EAAAuD,aAAAd,aAAAzC,EAAAmC,cAAAO,YAAA,eAAA2B,UAAA,EAAAC,YAAAtE,EAAAmD,KAAAP,KAAA,OAAAb,QAAA/B,EAAA+B,WAAiN5B,EAAA,aAAkBI,OAAOgE,KAAA,QAAAC,KAAA,aAAiCxE,EAAAqB,GAAA,UAAArB,EAAAqB,GAAA,KAAAlB,EAAA,OAAyCE,YAAA,iBAAAE,OAAoCkE,KAAA,OAAaA,KAAA,SAAY,IAExclD,oBCChC,IAuBemD,EAvBUjD,EAAQ,OAcjBkD,CACd1B,EACAiB,GAT6B,EAV/B,SAAoBvC,GAClBF,EAAQ,SAaS,KAEU,MAUG,oBC2FhCmD,GACArG,KADA,WAEA,OACAsG,aACAC,YAAA,EACAC,YACAC,UAAA,EACAC,UAAA,OACAC,MACAC,cAEAC,cAAAC,EAAA,EACAC,sBAGAC,YACAC,eAAAhE,EACAiE,eAAAC,EAAAC,EACA/D,YAAAmB,EACAE,oBAAAyB,GAEA/F,SAAAiH,OAMAC,OAAAC,EAAA,EAAAD,EACA,gBACA,iBACA,kBAYAE,OACAC,eADA,SACAC,EAAAC,GACArH,KAAAsH,gBAEAnB,SAJA,WAKAnG,KAAAC,OAAAa,SAAA,cAGAV,SACAmH,OADA,WAEAvH,KAAAmG,UAAA,GAEAqB,YAJA,SAIAC,GAAA,IAAAtC,EAAAnF,KAAA,OAAA0H,IAAAC,EAAAb,EAAAc,KAAA,SAAAC,IAAA,OAAAF,EAAAb,EAAAgB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACA9C,EAAAiB,UAAA,OACAjB,EAAAlF,OAAAa,SAAAqE,EAAApE,OAAAmH,oBAAAT,EAAAU,SACAhD,EAAAlF,OAAAa,SAAAqE,EAAApE,OAAAqH,mBAAAX,EAAAU,SACAhD,EAAAgB,UAAA,EAJA4B,EAAAE,KAAA,EAKA9C,EAAAkD,qBAAAZ,EAAAa,YALA,cAAAP,EAAAE,KAAA,EAMA9C,EAAAoD,iBAAAd,GANA,wBAAAM,EAAAS,SAAAX,EAAA1C,KAAAuC,IAQAe,cAZA,SAYAhB,GAAA,IAAAiB,EAAA1I,KACAA,KAAA2I,SAAA,gBACAC,kBAAA,KACAC,iBAAA,KACAlD,KAAA,YACAmD,KAAA,WACAJ,EAAAK,MACAC,KAAA,6BAAAC,GAAAxB,EAAAwB,KACAH,KAAA,SAAAI,GACAR,EAAAS,UACAxD,KAAA,UACAyD,QAAA,UAEAV,EAAApB,iBACA+B,MAAA,iBAGAC,YA7BA,WA6BA,IAAAC,EAAAvJ,KACAA,KAAAqG,KAAAiC,YAAAtI,KAAAqG,KAAAmD,WACAxJ,KAAAyJ,KAAAzJ,KAAAqG,KAAA,WAAArG,KAAA0J,aAAAT,IACAjJ,KAAAyJ,KAAAzJ,KAAAqG,KAAA,aAAArG,KAAAmH,eAAA8B,KAEAjJ,KAAA+I,MACAC,KAAA,0BAAAhJ,KAAAqG,MACAyC,KAAA,SAAAI,GACAA,EAAAS,UACAJ,EAAAJ,UACAxD,KAAA,UACAyD,QAAA,UAEAG,EAAApD,UAAA,EACAoD,EAAAjC,eACAiC,EAAAlD,YAKAhG,gBAjDA,SAiDAiC,GAAA,IAAAsH,EAAA5J,KAAA,OAAA0H,IAAAC,EAAAb,EAAAc,KAAA,SAAAiC,IAAA,IAAA1B,EAAA,OAAAR,EAAAb,EAAAgB,KAAA,SAAAgC,GAAA,cAAAA,EAAA9B,KAAA8B,EAAA7B,MAAA,cACA2B,EAAAzD,UAAA,EACAgC,EAAA7F,EAAA,GACAsH,EAAA3J,OAAAa,SAAA8I,EAAA7I,OAAAmH,oBAAAC,GACAyB,EAAA3J,OAAAa,SAAA8I,EAAA7I,OAAAqH,mBAAAD,GAJA2B,EAAA7B,KAAA,EAKA2B,EAAAvB,uBALA,wBAAAyB,EAAAtB,SAAAqB,EAAAD,KAAAlC,IAOAqC,WAxDA,WAyDA/J,KAAAmG,UAAA,EACAnG,KAAAoG,UAAA,OACApG,KAAAiG,YAAA,EACAjG,KAAAgK,UAAAhK,KAAAmH,eAAAqC,WAEAQ,UA9DA,SA8DAf,GAAA,IAAAgB,EAAAjK,KACAA,KAAA+I,MACAmB,IAAA,wBAAAzJ,QAAAwI,QACAH,KAAA,SAAAI,GACA,IAAAQ,EAAAR,EAAAxJ,KAIA,QAAAyK,KAFAT,EAAAU,OAAAV,EAAAU,OAAAzF,OAAA,SAAAC,GAAA,OAAAA,EAAAyF,aACAJ,EAAAhK,OAAAa,SAAAmJ,EAAAlJ,OAAAuJ,kBAAAZ,GACAO,EAAAP,aAAAU,OAAA,CACA,IAAAxF,EAAAqF,EAAAP,aAAAU,OAAAD,GAEAF,EAAAR,KAAAQ,EAAA5D,KAAAzB,EAAA2F,MAAA,IAEA,YAAA3F,EAAAe,MAAA,kBAAAf,EAAAe,MACAsE,EAAAR,KAAAQ,EAAA5D,KAAAzB,EAAA2F,UAIAN,EAAAR,KAAAQ,EAAA5D,KAAA,mBAIAiB,aApFA,WAoFA,IAAAkD,EAAAxK,KACAsI,EAAA,EACAtI,KAAAmH,iBACAmB,EAAAtI,KAAAmH,eAAA8B,IAEAjJ,KAAA+I,MACAmB,IAAA,uBAAAzJ,QAAA6H,gBACAQ,KAAA,SAAAI,GACAsB,EAAAtE,SAAAgD,EAAAxJ,QAGA6I,iBA/FA,SAAAkC,GA+FA,IAAAC,EAAA1K,KAAAiJ,EAAAwB,EAAAxB,GAAA,OAAAvB,IAAAC,EAAAb,EAAAc,KAAA,SAAA+C,IAAA,IAAAzB,EAAA0B,EAAAlB,EAAAmB,EAAA,OAAAlD,EAAAb,EAAAgB,KAAA,SAAAgD,GAAA,cAAAA,EAAA9C,KAAA8C,EAAA7C,MAAA,cAAA6C,EAAA7C,KAAA,EACAyC,EAAA3B,MACAmB,IAAA,4BAAAzJ,QAAAwI,QAFA,OACAC,EADA4B,EAAAC,KAIAH,EAAA1B,EAAAxJ,MACAgK,EAAAR,EAAAxJ,KAAAsL,OACAZ,OAAAV,EAAAU,OAAAzF,OAAA,SAAAC,GAAA,OAAAA,EAAAyF,aACAK,EAAAzK,OAAAa,SAAA4J,EAAA3J,OAAAuJ,kBAAAZ,GACAmB,GAAA,0DAEAH,EAAAjB,KAAAiB,EAAArE,KAAA,KAAA4C,GAEA4B,EAAAI,QAAA,SAAAV,GAAAG,EAAAjB,KAAAiB,EAAArE,KAAAkE,EAAAK,EAAAL,MAEAK,EAAA1E,UAAA0E,EAAA1E,SAAA1F,QACAoK,EAAA1E,SAAA+E,QAAA,SAAArG,GAAA8F,EAAAjB,KAAAiB,EAAArE,KAAAzB,EAAA2F,MAAA3F,EAAAX,SAGA2G,EAAAM,OAAAN,EAAAM,MAAA1K,QACAoK,EAAAM,MAAAD,QACA,SAAArG,GACA8F,EAAAjB,KAAAiB,EAAArE,KAAAzB,EAAA2F,MAAA3F,EAAAX,SAIA2G,EAAAtE,WACAoE,EAAAjB,KAAAiB,EAAArE,KAAA,YAAAuE,EAAAtE,WAEAoE,EAAAzE,YAAA,EA5BA,yBAAA6E,EAAAtC,SAAAmC,EAAAD,KAAAhD,IA+BAW,qBA9HA,WA8HA,IAAA8C,EAAAnL,KAAAsI,EAAA/H,UAAAC,OAAA,QAAA4K,IAAA7K,UAAA,GAAAA,UAAA,YAAAmH,IAAAC,EAAAb,EAAAc,KAAA,SAAAyD,IAAA,IAAAnC,EAAA,OAAAvB,EAAAb,EAAAgB,KAAA,SAAAwD,GAAA,cAAAA,EAAAtD,KAAAsD,EAAArD,MAAA,UACAK,GACA6C,EAAAhE,gBAAAgE,EAAAhE,eAAA8B,KACAX,EAAA6C,EAAAhE,eAAA8B,IAIAX,EAPA,CAAAgD,EAAArD,KAAA,eAAAqD,EAAAC,OAAA,wBAAAD,EAAArD,KAAA,EAUAkD,EAAApC,MACAmB,IAAA,gCAAAzJ,QAAA6H,gBAXA,OAUAY,EAVAoC,EAAAP,KAYAI,EAAA1E,iBAAAyC,EAAAxJ,KAZA,wBAAA4L,EAAA9C,SAAA6C,EAAAF,KAAAzD,KAeA7G,QA/LA,WAgMAb,KAAAqI,uBACArI,KAAAsH,eACAtH,KAAAC,OAAAa,SAAA,cCpTe0K,GADEtK,OAFP,WAAgB,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,mBAA6BF,EAAA,OAAYmK,aAAa1H,KAAA,QAAA2H,QAAA,UAAAzH,MAAA,OAAA0H,WAAA,aAAoExK,EAAAqB,GAAA,KAAAlB,EAAA,gBAAiCU,IAAI4J,UAAAzK,EAAAd,mBAAiCc,EAAAqB,GAAA,KAAAlB,EAAA,OAAwBE,YAAA,mBAA6BL,EAAAgF,SAA6mChF,EAAAoB,KAA7mCjB,EAAA,OAA4BE,YAAA,YAAsBL,EAAA,cAAAG,EAAA,OAAgCE,YAAA,mBAA6BF,EAAA,OAAAA,EAAA,KAAoBE,YAAA,aAAuBL,EAAAqB,GAAA,OAAArB,EAAAqB,GAAA,IAAArB,EAAAsB,GAAAtB,EAAA0K,cAAAC,eAAA,QAAA3K,EAAA0K,cAAA9H,KAAA,OAAA5C,EAAAqB,GAAA,KAAAlB,EAAA,aAAyII,OAAOiE,KAAA,UAAAD,KAAA,SAAgC1D,IAAK+J,MAAA5K,EAAA4I,cAAwB5I,EAAAqB,GAAA,YAAArB,EAAAoB,KAAApB,EAAAqB,GAAA,KAAAlB,EAAA,OAAoDE,YAAA,iBAA2BF,EAAA,YAAiB0K,aAAaC,MAAA,QAAevK,OAAQhC,KAAAyB,EAAA+E,YAAqB5E,EAAA,mBAAwBI,OAAOwK,KAAA,KAAArM,MAAA,KAAAoM,MAAA,QAAuC9K,EAAAqB,GAAA,KAAAlB,EAAA,mBAAoCI,OAAOwK,KAAA,QAAArM,MAAA,QAA6BsB,EAAAqB,GAAA,KAAAlB,EAAA,mBAAoCI,OAAOwK,KAAA,eAAArM,MAAA,QAAoCsB,EAAAqB,GAAA,KAAAlB,EAAA,mBAAoCI,OAAO7B,MAAA,MAAaqC,YAAAf,EAAAgB,KAAsBC,IAAA,UAAAC,GAAA,SAAA8J,GAAiC,OAAA7K,EAAA,aAAwBI,OAAOiE,KAAA,QAAc3D,IAAK+J,MAAA,SAAAK,GAAyB,OAAAjL,EAAAqG,YAAA2E,EAAA1E,SAAoCtG,EAAAqB,GAAA,QAAArB,EAAAqB,GAAA,KAAAlB,EAAA,aAA6CI,OAAOiE,KAAA,QAAc3D,IAAK+J,MAAA,SAAAK,GAAyB,OAAAjL,EAAAsH,cAAA0D,EAAA1E,SAAsCtG,EAAAqB,GAAA,YAAmB,uBAAyB,SAAArB,EAAAqB,GAAA,KAAArB,EAAAgF,UAAAhF,EAAAuI,aAAApI,EAAA,OAA8EE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,mBAA6BF,EAAA,OAAAA,EAAA,QAAuBE,YAAA,YAAAQ,IAA4B+J,MAAA5K,EAAAoG,UAAoBjG,EAAA,QAAaE,YAAA,aAAuBL,EAAAqB,GAAA,OAAArB,EAAAqB,GAAA,QAAArB,EAAAqB,GAAA,KAAAlB,EAAA,cAA4DI,OAAO2K,UAAA,cAAwBlL,EAAAqB,GAAA,KAAAlB,EAAA,QAAAH,EAAAqB,GAAA,MAAAlB,EAAA,KAA8CE,YAAA,aAAuBL,EAAAqB,GAAA,OAAArB,EAAAqB,GAAArB,EAAAsB,GAAAtB,EAAAgG,eAAApD,MAAA,KAAA5C,EAAAsB,GAAAtB,EAAAiF,eAAA,KAAAjF,EAAAqB,GAAA,KAAAlB,EAAA,OAAiHE,YAAA,iBAA2BF,EAAA,WAAgBI,OAAO4K,cAAA,WAAuBnL,EAAAoL,GAAApL,EAAAuI,aAAA,gBAAA9E,EAAA4H,GAAwD,eAAA5H,EAAAe,KAAArE,EAAA,gBAA+CI,OAAO7B,MAAA+E,EAAA/E,SAAoByB,EAAA,YAAiBc,IAAAoK,EAAA9K,OAAiBqC,KAAAa,EAAA2F,OAAkBS,OAAQ/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,uBAAgC,GAAAxK,EAAAoB,KAAApB,EAAAqB,GAAA,iBAAAoC,EAAAe,MAAAjF,MAAAiM,QAAAxL,EAAAkF,KAAAzB,EAAA2F,QAAAjJ,EAAA,gBAA6GI,OAAO7B,MAAA+E,EAAA/E,SAAoByB,EAAA,qBAA0B0J,OAAO/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,qBAAgCxK,EAAAoL,GAAA3H,EAAA,eAAAgI,GAAsC,OAAAtL,EAAA,eAAyBI,OAAO7B,MAAA+M,EAAA3I,SAAsB9C,EAAAqB,GAAArB,EAAAsB,GAAAmK,EAAA7I,WAAgC,OAAA5C,EAAAoB,KAAApB,EAAAqB,GAAA,cAAAoC,EAAAe,KAAArE,EAAA,gBAAsEI,OAAO7B,MAAA+E,EAAA/E,SAAoByB,EAAA,gBAAqB0J,OAAO/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,uBAAgC,GAAAxK,EAAAoB,KAAApB,EAAAqB,GAAA,uBAAAoC,EAAAe,KAAArE,EAAA,gBAA4EI,OAAO7B,MAAA+E,EAAA/E,SAAoByB,EAAA,yBAA8B0J,OAAO/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,uBAAgC,GAAAxK,EAAAoB,KAAApB,EAAAqB,GAAA,iBAAAoC,EAAAe,KAAArE,EAAA,gBAAsEI,OAAO7B,MAAA+E,EAAA/E,SAAoByB,EAAA,YAAiBI,OAAOiE,KAAA,YAAkBqF,OAAQ/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,uBAAgC,GAAAxK,EAAAoB,KAAApB,EAAAqB,GAAA,gBAAAoC,EAAAe,KAAArE,EAAA,gBAAqEE,YAAA,UAAAE,OAA6B7B,MAAA+E,EAAA/E,SAAoByB,EAAA,OAAAA,EAAA,oBAAmCI,OAAOmL,OAAA1L,EAAAoF,eAA2ByE,OAAQ/G,MAAA9C,EAAAkF,KAAAzB,EAAA2F,OAAAkC,SAAA,SAAAC,GAAsDvL,EAAAsI,KAAAtI,EAAAkF,KAAAzB,EAAA2F,MAAAmC,IAAoCf,WAAA,uBAAgC,KAAAxK,EAAAoB,QAAkBpB,EAAAqB,GAAA,KAAArB,EAAAsF,iBAAA,OAAAnF,EAAA,gBAA+DI,OAAO7B,MAAA,WAAiByB,EAAA,qBAA0B0J,OAAO/G,MAAA9C,EAAAkF,KAAA,UAAAoG,SAAA,SAAAC,GAAuDvL,EAAAsI,KAAAtI,EAAAkF,KAAA,YAAAqG,IAAqCf,WAAA,sBAAiCxK,EAAAoL,GAAApL,EAAA,0BAAAyL,GAAgD,OAAAtL,EAAA,eAAyBI,OAAO7B,MAAA+M,EAAA3D,MAAmB9H,EAAAqB,GAAArB,EAAAsB,GAAAmK,EAAA7I,WAAgC,OAAA5C,EAAAoB,KAAApB,EAAAqB,GAAA,KAAAlB,EAAA,gBAAAA,EAAA,aAAiEI,OAAOiE,KAAA,UAAAD,KAAA,SAAgC1D,IAAK+J,MAAA5K,EAAAmI,eAAyBnI,EAAAqB,GAAA,sBAAArB,EAAAoB,QAAA,IAE5yIG,oBCChC,IAcIoK,EAdqBlK,EAAQ,OAcjBmK,CACdhH,EACAyF,GAT6B,EAV/B,SAAoB1I,GAClBF,EAAQ,SAaS,kBAEU,MAUdoK,EAAA,QAAAF,EAAiB","file":"static/js/3.9414497634381c9974b9.js","sourcesContent":["<style lang=\"less\">\n  .l-tree-containner{\n    min-width: 200px;\n    padding: 20px;\n    border-right: 1px solid #f4f4f4;\n    flex-shrink: 0;\n  }\n  .custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 16px;\n    padding-right: 8px;\n  }\n</style>\n<template>\n  <div class=\"l-tree-containner\">\n    <el-tree\n      @node-click=\"handleNodeClick\"\n      icon-class=\"el-icon-caret-right\"\n      :default-expand-all=\"true\"\n      ref=\"tree\"\n      :data=\"treeData\"\n      node-key=\"id\"\n      :props=\"customProps\"\n      :expand-on-click-node=\"false\">\n            <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n              <span><span v-if=\"!data.children.length\" class=\"iconfont\">&#xe92a;</span>{{ node.label }}</span>\n            </span>\n    </el-tree>\n  </div>\n</template>\n<script>\n  export default {\n    data(){\n      return {\n        customProps: {\n          children: 'children',\n          label: 'name'\n        }\n      }\n    },\n    computed:{\n      treeData(){\n        return this.$store.getters.channels;\n      }\n    },\n    methods:{\n      handleNodeClick(...params){\n        this.$emit('nodeClick', params);\n      }\n    },\n    mounted() {\n      this.$store.dispatch('toggleState');\n      this.$store.dispatch(this.$types.CMS_CHANNELS);\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/cms/components/channelTree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-tree-containner\"},[_c('el-tree',{ref:\"tree\",attrs:{\"icon-class\":\"el-icon-caret-right\",\"default-expand-all\":true,\"data\":_vm.treeData,\"node-key\":\"id\",\"props\":_vm.customProps,\"expand-on-click-node\":false},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[(!data.children.length)?_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]):_vm._e(),_vm._v(_vm._s(node.label))])])}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a0f12a1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/cms/components/channelTree.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a0f12a1\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./channelTree.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./channelTree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./channelTree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a0f12a1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./channelTree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/cms/components/channelTree.vue\n// module id = null\n// module chunks = ","<template>\n    <el-upload\n            class=\"avatar-uploader\"\n            :action=\"uploadUrl\"\n            :on-success=\"uploadSuccess\"\n            list-type=\"picture-card\"\n            :show-file-list=\"false\"\n            name=\"file\"\n            :headers=\"headers\"\n    >\n        <img v-if=\"value\" :src=\"value\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n    </el-upload>\n</template>\n<script>\n//    import custom from '@/../config/custom'\n\n    export default {\n        props:['value'],\n        data(){\n            return {\n                uploadUrl: this.SITE_URL + '/api/admin/file/upload',\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem('accessToken')\n                },\n            }\n        },\n        methods:{\n            uploadSuccess(response, file, fileList){\n                this.$emit('input', response.data.file)\n            }\n        }\n    }\n</script>\n<style lang=\"less\">\n    .avatar-uploader .el-upload{\n        border: 1px solid #DCDFE6;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        box-sizing: content-box;\n        padding: 8px;\n        border-radius: 4px;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #DCDFE6;\n        width: 146px;\n        height: 146px;\n        line-height: 146px;\n        text-align: center;\n    }\n    .avatar {\n        width: 146px;\n        height: 146px;\n        display: block;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/imageUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"on-success\":_vm.uploadSuccess,\"list-type\":\"picture-card\",\"show-file-list\":false,\"name\":\"file\",\"headers\":_vm.headers}},[(_vm.value)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.value}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d684b1b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/imageUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d684b1b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./imageUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./imageUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./imageUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d684b1b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./imageUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/imageUpload.vue\n// module id = null\n// module chunks = ","<template>\n    <el-upload\n            :on-preview=\"preview\"\n            :action=\"uploadUrl\"\n            :on-remove=\"uploadRemove\"\n            :on-success=\"uploadSuccess\"\n            list-type=\"picture-card\"\n            :multiple=\"true\"\n            :file-list=\"vals\"\n            name=\"file\"\n            :headers=\"headers\"\n    >\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\"></div>\n    </el-upload>\n</template>\n<script>\n    //import custom from '@/../config/custom'\n\n    export default {\n        props:['value'],\n        data(){\n            return {\n                uploadUrl: this.SITE_URL + '/api/admin/file/upload',\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem('accessToken')\n                },\n                disabled: false,\n                vals: []\n            }\n        },\n        methods:{\n            preview(file){\n                window.open(file.response.data.file)\n            },\n            uploadRemove(file){\n                this.vals = this.vals.filter( item => { return item.url != file.response.data.file});\n                this.$emit('input', this.vals)\n            },\n            uploadSuccess(response, file, fileList){\n                const item = {description: '', url: response.data.file}\n                console.log(JSON.stringify(item));\n                this.vals.push(item);\n                console.log(JSON.stringify(this.vals));\n                this.$emit('input', this.vals)\n            }\n        },\n        mounted: function () {\n            this.$nextTick(() => {\n                this.vals = this.value\n            })\n        }\n    }\n</script>\n<style lang=\"less\">\n    .avatar-uploader .el-upload{\n        border: 1px solid #DCDFE6;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        box-sizing: content-box;\n        padding: 8px;\n        border-radius: 4px;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #DCDFE6;\n        width: 146px;\n        height: 146px;\n        line-height: 146px;\n        text-align: center;\n    }\n    .avatar {\n        width: 146px;\n        height: 146px;\n        display: block;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/multipleImageUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-upload',{attrs:{\"on-preview\":_vm.preview,\"action\":_vm.uploadUrl,\"on-remove\":_vm.uploadRemove,\"on-success\":_vm.uploadSuccess,\"list-type\":\"picture-card\",\"multiple\":true,\"file-list\":_vm.vals,\"name\":\"file\",\"headers\":_vm.headers}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0a4b89a3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/multipleImageUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a4b89a3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./multipleImageUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./multipleImageUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./multipleImageUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a4b89a3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./multipleImageUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/multipleImageUpload.vue\n// module id = null\n// module chunks = ","<style lang=\"less\" scoped>\n  .l-content-list{\n    display: flex;\n    flex-flow: row nowrap;\n    min-height: calc(100vh - 50px - 20px);\n    margin:-20px 0 -20px -20px;\n    overflow-x: hidden;\n    .l-tree-content{\n      padding: 20px;\n      flex-grow: 1;\n      display: flex;\n      flex-flow: row nowrap;\n      box-sizing: border-box;\n      width: calc(100% - 240px);\n    }\n  }\n</style>\n<template>\n  <div class=\"l-content-list\">\n    <div v-title=\"'内容管理'\"></div>\n    <channel-tree @nodeClick=\"handleNodeClick\"></channel-tree>\n    <div class=\"l-tree-content\">\n        <div class=\"l-block\" v-if=\"!showForm\">\n          <div class=\"l-block-header\" v-if=\"parentChannel\">\n            <div><i class=\"iconfont\">&#xe64c;</i> {{parentChannel.hasOwnProperty('name') ? parentChannel.name : ''}}</div>\n            <el-button type=\"primary\" size=\"small\" @click=\"addContent\">新增</el-button>\n          </div>\n          <div class=\"l-block-body\">\n            <el-table\n              :data=\"contents\"\n              style=\"width: 100%\">\n              <el-table-column\n                prop=\"id\"\n                label=\"ID\"\n                width=\"80\">\n              </el-table-column>\n              <el-table-column\n                prop=\"title\"\n                label=\"标题\">\n              </el-table-column>\n              <el-table-column\n                prop=\"channel.name\"\n                label=\"栏目\">\n              </el-table-column>\n              <el-table-column\n                label=\"操作\">\n                <template slot-scope=\"scope\">\n                  <el-button type=\"text\" @click=\"editContent(scope.row)\">编辑</el-button>\n                  <el-button type=\"text\" @click=\"deleteContent(scope.row)\">删除</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n        </div>\n      <div class=\"l-block\" v-if=\"showForm && currentModel\">\n        <div class=\"l-block-header\">\n          <div>\n            <span class=\"l-go-back\" @click=\"goback\"><span class=\"iconfont\">&#xe601;</span>返回</span>\n            <el-divider direction=\"vertical\"></el-divider>\n            <span>在「<i class=\"iconfont\">&#xe64c;</i>{{currentChannel.name}}」下{{formTitle}}</span>\n          </div>\n        </div>\n        <div class=\"l-block-body\">\n          <el-form label-width=\"100px\">\n            <template v-for=\"(item, index) in currentModel.fields\">\n\n              <el-form-item v-if=\"item.type=='text'\" :label=\"item.label\">\n                <el-input :key=\"index\" :name=\"item.field\" v-model=\"form[item.field]\"></el-input>\n              </el-form-item>\n\n              <el-form-item v-if=\"item.type=='checkbox' && Array.isArray(form[item.field])\" :label=\"item.label\">\n                <el-checkbox-group v-model=\"form[item.field]\">\n                  <el-checkbox :label=\"option.value\" v-for=\"option in item.extra\">{{option.name}}</el-checkbox>\n                </el-checkbox-group>\n              </el-form-item>\n\n              <el-form-item v-if=\"item.type=='image'\" :label=\"item.label\">\n                <image-upload v-model=\"form[item.field]\"></image-upload>\n              </el-form-item>\n\n              <el-form-item v-if=\"item.type=='multiple-image'\" :label=\"item.label\">\n                <multiple-image-upload v-model=\"form[item.field]\"></multiple-image-upload>\n              </el-form-item>\n\n              <el-form-item v-if=\"item.type=='textarea'\" :label=\"item.label\">\n                <el-input type=\"textarea\" v-model=\"form[item.field]\"></el-input>\n              </el-form-item>\n\n              <el-form-item v-if=\"item.type=='content'\" class=\"l-mb-22\" :label=\"item.label\">\n                <div>\n                  <vue-ueditor-wrap v-model=\"form[item.field]\" :config=\"ueditorConfig\"></vue-ueditor-wrap>\n                </div>\n              </el-form-item>\n\n            </template>\n            <el-form-item label=\"编辑推荐位\" v-if=\"contentPositions.length\">\n                <el-checkbox-group  v-model=\"form['positions']\">\n                  <el-checkbox :label=\"option.id\" v-for=\"option in contentPositions\">{{option.name}}</el-checkbox>\n                </el-checkbox-group>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" size=\"small\" @click=\"saveContent\">提交</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import channelTree from \"./components/channelTree\";\n  import VueUeditorWrap from 'vue-ueditor-wrap';\n  import ueditorConfig from \"../../store/ueditor\";\n  import imageUpload from \"@/components/imageUpload\"\n  import multipleImageUpload from \"@/components/multipleImageUpload\"\n  import {mapState, mapGetters} from 'vuex'\n\n  export default {\n    data() {\n      return {\n        checkList:[],\n        showSwitch: false,\n        contents: [],\n        showForm: false,\n        formTitle: '添加文章',\n        form:{\n            positions:[]\n        },\n        ueditorConfig: ueditorConfig,\n        contentPositions: []\n      }\n    },\n    components:{\n      'channel-tree': channelTree,\n      VueUeditorWrap,\n      imageUpload,\n      multipleImageUpload\n    },\n    computed:{\n//      ...mapState({\n//          parentChannel: state => state.cms.parentChannel,\n//          currentChannel: state => state.cms.currentChannel,\n//          currentModel: state => state.cms.currentModel,\n//      }),\n      ...mapGetters([\n          'parentChannel',\n          'currentChannel',\n          'currentModel',\n      ]),\n//      parentChannel(){\n//        return this.$store.getters.parentChannel;\n//      },\n//      currentChannel(){\n//        return this.$store.getters.currentChannel\n//      },\n//      currentModel(){\n//        return this.$store.getters.currentModel\n//      }\n    },\n    watch:{\n      currentChannel(val, oldVal){\n        this.loadContents()\n      },\n      showForm(){\n        this.$store.dispatch('collapse');\n      }\n    },\n    methods: {\n      goback(){\n        this.showForm = false;\n      },\n      async editContent(row){\n        this.formTitle = '编辑文章';\n        this.$store.dispatch(this.$types.CMS_CURRENT_CHANNEL, row.channel);\n        this.$store.dispatch(this.$types.CMS_PARENT_CHANNEL, row.channel)\n        this.showForm = true;\n        await this.loadContentPositions(row.channel_id)\n        await this.loadWholeContent(row)\n      },\n      deleteContent(row){\n        this.$confirm('确定删除文章?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$http\n            .post(\"/admin/cms/content/delete\", {id: row.id})\n            .then(res => {\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n              this.loadContents()\n            }).catch(()=>{});\n        });\n      },\n      saveContent(){\n          if(!this.form.channel_id && !this.form.model_id){\n            this.$set(this.form, 'model_id', this.currentModel.id);\n            this.$set(this.form, 'channel_id', this.currentChannel.id)\n          }\n          this.$http\n            .post(\"/admin/cms/content/save\", this.form)\n            .then(res => {\n              if(res.success){\n                this.$message({\n                  type: 'success',\n                  message: '添加成功!'\n                });\n                this.showForm = false;\n                this.loadContents();\n                this.form = {}\n              }\n            });\n      },\n\n      async handleNodeClick(node, ...params){\n        this.showForm = false;\n        let channel = node[0]\n        this.$store.dispatch(this.$types.CMS_CURRENT_CHANNEL, channel);\n        this.$store.dispatch(this.$types.CMS_PARENT_CHANNEL, channel)\n        await this.loadContentPositions()\n      },\n      addContent(){\n        this.showForm = true;\n        this.formTitle = '添加文章';\n        this.showSwitch = false;\n        this.loadModel(this.currentChannel.model_id)\n      },\n      loadModel(id){\n        this.$http\n          .get(\"/admin/cms/model/get\", {params: {id}})\n          .then(res => {\n            let currentModel = res.data;\n            // 过滤掉模型中属于栏目的字段\n            currentModel.fields = currentModel.fields.filter(item => { return !item.is_channel })\n            this.$store.dispatch(this.$types.CMS_CURRENT_MODEL, currentModel)\n            for(let idx in this.currentModel.fields){\n              let item = this.currentModel.fields[idx];\n                // 重置表单\n                this.$set(this.form, item.field, '');\n//                if(!Array.isArray(this.form[item.field])){\n                  if(item.type == 'checkbox' || item.type == 'multiple-image'){\n                      this.$set(this.form, item.field, []);\n                  }\n//                }\n            }\n            this.$set(this.form, 'positions', [])\n          });\n\n      },\n      loadContents(){\n        let channel_id = 0;\n        if(this.currentChannel){\n          channel_id = this.currentChannel.id\n        }\n        this.$http\n          .get(\"/admin/cms/contents\", {params: {channel_id}})\n          .then(res => {\n            this.contents = res.data;\n          });\n      },\n      async loadWholeContent({id}){\n        let res = await this.$http\n          .get(\"/admin/cms/content/whole\", {params: {id}});\n\n            let content = res.data;\n            let currentModel = res.data.model;\n            currentModel.fields = currentModel.fields.filter(item => { return !item.is_channel })\n            this.$store.dispatch(this.$types.CMS_CURRENT_MODEL, currentModel)\n            let contentFields = ['channel_id', 'model_id', 'title', 'keywords', 'description'];\n\n            this.$set(this.form, 'id', id);\n\n            contentFields.forEach( field => {this.$set(this.form, field, content[field])} );\n\n            if(content.contents && content.contents.length){\n              content.contents.forEach( item => {this.$set(this.form, item.field, item.value)} );\n            }\n\n            if(content.metas && content.metas.length){\n              content.metas.forEach(\n                item => {\n                  this.$set(this.form, item.field, item.value);\n                });\n            }\n\n            if(content.positions){\n                this.$set(this.form, 'positions', content.positions)\n            }\n            this.showSwitch = false\n\n      },\n      async loadContentPositions(channel_id=0){\n          if(!channel_id){\n              if(this.currentChannel && this.currentChannel.id){\n                  channel_id = this.currentChannel.id;\n              }\n          }\n          // 没有选定的栏目, 不进行[可选推荐位]的加载\n          if(!channel_id){\n              return;\n          }\n          let res = await this.$http\n              .get(\"/admin/cms/content/positions\", {params: {channel_id}})\n          this.contentPositions = res.data\n      }\n    },\n    mounted() {\n      this.loadContentPositions();\n      this.loadContents()\n      this.$store.dispatch('collapse');\n    }\n  }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/cms/content.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-content-list\"},[_c('div',{directives:[{name:\"title\",rawName:\"v-title\",value:('内容管理'),expression:\"'内容管理'\"}]}),_vm._v(\" \"),_c('channel-tree',{on:{\"nodeClick\":_vm.handleNodeClick}}),_vm._v(\" \"),_c('div',{staticClass:\"l-tree-content\"},[(!_vm.showForm)?_c('div',{staticClass:\"l-block\"},[(_vm.parentChannel)?_c('div',{staticClass:\"l-block-header\"},[_c('div',[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(\" \"+_vm._s(_vm.parentChannel.hasOwnProperty('name') ? _vm.parentChannel.name : ''))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addContent}},[_vm._v(\"新增\")])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"l-block-body\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.contents}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"channel.name\",\"label\":\"栏目\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.editContent(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteContent(scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,3534639574)})],1)],1)]):_vm._e(),_vm._v(\" \"),(_vm.showForm && _vm.currentModel)?_c('div',{staticClass:\"l-block\"},[_c('div',{staticClass:\"l-block-header\"},[_c('div',[_c('span',{staticClass:\"l-go-back\",on:{\"click\":_vm.goback}},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"在「\"),_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(_vm._s(_vm.currentChannel.name)+\"」下\"+_vm._s(_vm.formTitle))])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"l-block-body\"},[_c('el-form',{attrs:{\"label-width\":\"100px\"}},[_vm._l((_vm.currentModel.fields),function(item,index){return [(item.type=='text')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-input',{key:index,attrs:{\"name\":item.field},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='checkbox' && Array.isArray(_vm.form[item.field]))?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-checkbox-group',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}},_vm._l((item.extra),function(option){return _c('el-checkbox',{attrs:{\"label\":option.value}},[_vm._v(_vm._s(option.name))])}),1)],1):_vm._e(),_vm._v(\" \"),(item.type=='image')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('image-upload',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='multiple-image')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('multiple-image-upload',{model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='textarea')?_c('el-form-item',{attrs:{\"label\":item.label}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1):_vm._e(),_vm._v(\" \"),(item.type=='content')?_c('el-form-item',{staticClass:\"l-mb-22\",attrs:{\"label\":item.label}},[_c('div',[_c('vue-ueditor-wrap',{attrs:{\"config\":_vm.ueditorConfig},model:{value:(_vm.form[item.field]),callback:function ($$v) {_vm.$set(_vm.form, item.field, $$v)},expression:\"form[item.field]\"}})],1)]):_vm._e()]}),_vm._v(\" \"),(_vm.contentPositions.length)?_c('el-form-item',{attrs:{\"label\":\"编辑推荐位\"}},[_c('el-checkbox-group',{model:{value:(_vm.form['positions']),callback:function ($$v) {_vm.$set(_vm.form, 'positions', $$v)},expression:\"form['positions']\"}},_vm._l((_vm.contentPositions),function(option){return _c('el-checkbox',{attrs:{\"label\":option.id}},[_vm._v(_vm._s(option.name))])}),1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.saveContent}},[_vm._v(\"提交\")])],1)],2)],1)]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-10522411\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/cms/content.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10522411\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./content.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./content.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./content.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10522411\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./content.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-10522411\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/cms/content.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}