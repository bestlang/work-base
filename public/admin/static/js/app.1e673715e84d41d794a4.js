webpackJsonp([23],{"4P8T":function(t,n){},"5l2l":function(t,n){},"6NOn":function(t,n){},B3t3:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={};e.d(o,"ACCESS_TOKEN",function(){return I}),e.d(o,"ACTIVITY_TYPES",function(){return N}),e.d(o,"ACTIVITY_APPLICABLES",function(){return T}),e.d(o,"PRIVILEGES",function(){return A}),e.d(o,"PRIVILEGE_CURRENT_ROLE",function(){return M}),e.d(o,"USER",function(){return L}),e.d(o,"LOADING",function(){return P}),e.d(o,"CMS_MODELS",function(){return x}),e.d(o,"CMS_CHANNELS",function(){return O}),e.d(o,"CMS_CHANNEL_CHILDREN",function(){return U}),e.d(o,"CMS_PARENT_CHANNEL",function(){return $}),e.d(o,"CMS_CURRENT_CHANNEL",function(){return k}),e.d(o,"CMS_CURRENT_MODEL",function(){return H}),e.d(o,"CMS_CONTENTS",function(){return V}),e.d(o,"CMS_CURRENT_CHANNEL_POSITION",function(){return D}),e.d(o,"CMS_CURRENT_POSITION",function(){return Y});var i=e("7+uW"),a=e("zL8q"),s=e.n(a),c=(e("aEO6"),e("UBeP"),e("NYxO")),r=e("/ocq"),l=e("pFkg"),u=e.n(l),p={computed:{user:function(){return this.$store.getters[this.$types.USER]}},methods:{toggleCollapse:function(){this.$store.dispatch("toggleState")},logout:function(){var t=this;this.$http.post("auth/logout").then(function(n){200==n.code?(localStorage.removeItem(t.$types.USER),t.$store.commit(t.$types.ACCESS_TOKEN,null),t.$router.push("/login")):401==n.code&&t.$router.push("/login")})}}},h={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"ls-top-wrap"},[e("div",{staticClass:"ls-top-left"},[e("div",{staticClass:"ls-icon-collapse",on:{click:t.toggleCollapse}},[e("i",{staticClass:"iconfont l-color"},[t._v("")])])]),t._v(" "),e("div",{staticClass:"ls-top-right"},[e("el-dropdown",[e("div",{staticClass:"logout"},[e("i",{staticClass:"iconfont"},[t._v(" ")]),t._v(t._s(t.user.name))]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{on:{click:t.logout}},[e("i",{staticClass:"iconfont"},[t._v(" ")]),t._v("登出")])]),t._v(" "),e("el-dropdown-item",[e("i",{staticClass:"iconfont"},[t._v(" ")]),t._v("修改密码")])],1)],1)],1)])},staticRenderFns:[]};var d=e("VU/8")(p,h,!1,function(t){e("4P8T")},"data-v-14eb16c6",null).exports,m={name:"cell",props:{item:{type:Object,default:{}},type:{type:String}},methods:{handleMouseEnter:function(t){t.target.stopPropagation()}}},f={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.item.meta.show?e(t.type,{tag:"div",staticClass:"unselectable",attrs:{index:t.item.path}},["el-submenu"===t.type?[e("template",{slot:"title"},[e("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(t.item.meta.font)}}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.name))])]),t._v(" "),t._l(t.item.children,function(n){return[e("cell",{attrs:{item:n,type:n.children&&n.children.filter(function(t){return t.meta.show}).length?"el-submenu":"el-menu-item"},on:{mouseenter:t.handleMouseEnter}})]})]:t._e(),t._v(" "),"el-menu-item"===t.type?[e("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(t.item.meta.font)}}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.name))])]:t._e()],2):t._e()},staticRenderFns:[]},v={components:{cell:e("VU/8")(m,f,!1,null,null,null).exports},data:function(){return{defaultActive:"",router:b,privileges:[]}},computed:{isCollapse:function(){return this.$store.state.system.isCollapse}},methods:{handleOpen:function(t,n){console.log(t,n)},handleClose:function(t,n){console.log(t,n)},resetVisible:function(t,n){var e=this;t.map(function(t,o){t.hasOwnProperty("children")&&(t.children.map(function(e,o){-1===n.indexOf(t.children[o].meta.can)&&(t.children[o].meta.show=!1)}),e.resetVisible(t.children,n))})},loadUserPermissions:function(){var t=this;this.$http.get("/admin/privileges/user/permissions").then(function(n){t.privileges=n.data,t.$store.commit(t.$types.PRIVILEGES,n.data);var e=t.router.options.routes;t.resetVisible(e,t.privileges)})}},created:function(){this.defaultActive=this.$route.path,this.loadUserPermissions()}},g={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapse,expression:"!isCollapse"}],staticClass:"ls-top-logo"},[t._v("路章の博客")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],staticClass:"ls-top-logo-narrow"},[t._v("路")]),t._v(" "),e("el-menu",{ref:"sidemenu",staticClass:"el-menu-vertical",attrs:{"unique-opened":!0,router:"","default-active":t.defaultActive,collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},[t._l(t.router.options.routes,function(n,o){return[n.children&&n.children.filter(function(t){return t.meta.show}).length?[t._l(n.children,function(t){return[e("cell",{attrs:{item:t,type:t.children&&n.children.filter(function(t){return t.meta.show}).length?"el-submenu":"el-menu-item"}})]})]:t._e()]})],2)],1)},staticRenderFns:[]};var C={components:{"backend-top":d,"backend-menu":e("VU/8")(v,g,!1,function(t){e("6NOn"),e("B3t3")},"data-v-0e935128",null).exports},computed:{isCollapse:function(){return this.$store.state.system.isCollapse}},mounted:function(){this.$store.dispatch(this.$types.ACTIVITY_TYPES),this.$store.dispatch(this.$types.ACTIVITY_APPLICABLES)}},_={render:function(){var t=this.$createElement,n=this._self._c||t;return n("el-container",{staticClass:"ls-container"},[n("div",{staticClass:"ls-aside"},[n("div",{staticClass:"ls-left"},[n("backend-menu")],1)]),this._v(" "),n("div",{staticClass:"ls-content"},[n("div",{staticClass:"ls-top"},[n("backend-top")],1),this._v(" "),n("div",{staticClass:"ls-main"},[n("div",{staticStyle:{"box-sizing":"border-box",background:"#fff",padding:"20px","min-height":"100%"}},[n("router-view")],1)])])])},staticRenderFns:[]};var y=e("VU/8")(C,_,!1,function(t){e("5l2l")},"data-v-327659db",null).exports;i.default.use(r.a);var b=new r.a({mode:"history",base:"/admin/",saveScrollPosition:"true",routes:[{path:"/",component:y,meta:{can:"",show:!1,name:"根菜单"},children:[{path:"/dashboard",component:function(t){return Promise.all([e.e(1),e.e(9)]).then(function(){var n=[e("XRHL")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!0,name:"面板",font:"&#xe764;"}},{path:"/cms",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms",show:!0,name:"内容管理",font:"&#xe764;"},children:[{path:"/cms/content",component:function(t){return Promise.all([e.e(1),e.e(3)]).then(function(){var n=[e("rh17")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms list contents",show:!0,name:"内容管理",font:"&#xe764;"}},{path:"/cms/channel",component:function(t){return Promise.all([e.e(1),e.e(4)]).then(function(){var n=[e("J4LN")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms list channels",show:!0,name:"栏目管理",font:"&#xe764;"}},{path:"/cms/position",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms list contents",show:!0,name:"推荐管理",font:"&#xe764;"},children:[{path:"/cms/position/position",component:function(t){return e.e(19).then(function(){var n=[e("hCJu")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!0,name:"推荐位",font:"&#xe764;"}},{path:"/cms/position/content",component:function(t){return e.e(20).then(function(){var n=[e("zV5m")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!1,name:"内容管理",font:"&#xe764;"}},{path:"/cms/position/subs",component:function(t){return e.e(18).then(function(){var n=[e("n+mU")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!1,name:"内容推荐位",font:"&#xe764;"}}]},{path:"/cms/comment",component:function(t){return e.e(21).then(function(){var n=[e("dwZX")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms list contents",show:!0,name:"评论管理",font:"&#xe764;"}},{path:"/cms/setting",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"cms list contents",show:!0,name:"设置",font:"&#xe764;"},children:[{path:"/cms/setting/model",component:function(t){return e.e(17).then(function(){var n=[e("PaIR")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!0,name:"模型管理",font:"&#xe764;"}},{path:"/cms/setting/model/add",component:function(t){return e.e(2).then(function(){var n=[e("HOqM")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!1,name:"添加模型",font:"&#xe764;"}},{path:"/cms/setting/model/edit",component:function(t){return e.e(2).then(function(){var n=[e("HOqM")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!1,name:"编辑模型",font:"&#xe764;"}},{path:"/cms/setting/field/types",component:function(t){return e.e(13).then(function(){var n=[e("6dud")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"dashboard",show:!0,name:"字段类型",font:"&#xe764;"}}]}]},{path:"/activity",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"activity",show:!0,name:"活动管理",font:"&#xe6c5;"},children:[{path:"/activity/list",component:function(t){return e.e(15).then(function(){var n=[e("Pvz1")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"activity list",show:!0,name:"活动列表",font:"&#xe6a3;"}},{path:"/activity/add",component:function(t){return e.e(11).then(function(){var n=[e("70YF")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"add activity",show:!0,name:"添加活动",font:"&#xe663;"}},{path:"/activity/edit",component:function(t){return e.e(8).then(function(){var n=[e("A7xX")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"edit activity",show:!1,name:"编辑活动",font:""}}]},{path:"/pdd",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"pdd",name:"拼多多",font:"&#xe711;",show:!0},children:[{path:"/pdd/cat",component:function(t){return e.e(16).then(function(){var n=[e("XwZp")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"pdd cat goods",show:!0,name:"分类商品",font:"&#xe711;"}},{path:"/pdd/orders",component:function(t){return e.e(10).then(function(){var n=[e("M7eE")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"pdd orders",show:!0,name:"订单",font:"&#xe62f;"}}]},{path:"/privileges",component:function(t){return e.e(0).then(function(){var n=[e("RRQr")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"privileges",show:!0,name:"权限系统",font:"&#xe70b;"},children:[{path:"/privileges/roles",component:function(t){return e.e(5).then(function(){var n=[e("gYjH")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"privileges list roles",show:!0,name:"角色管理",font:"&#xe612;"}},{path:"/privileges/permissions",component:function(t){return e.e(7).then(function(){var n=[e("YMpQ")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"privileges list permissions",show:!0,name:"权限管理",font:"&#xe70b;"}},{path:"/privileges/roles/users",component:function(t){return e.e(6).then(function(){var n=[e("glAp")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"privileges list role users",show:!1,name:"角色用户",font:""}},{path:"/privileges/roles/permissions",component:function(t){return e.e(12).then(function(){var n=[e("js6L")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{can:"privileges role permissions",show:!1,name:"角色权限",font:""}}]}]},{path:"/login",component:function(t){return e.e(14).then(function(){var n=[e("Luci")];t.apply(null,n)}.bind(this)).catch(e.oe)},meta:{name:"登录"}}]}),E=e("bOdI"),S=e.n(E),w=e("mvHQ"),R=e.n(w),I="ACCESS_TOKEN",N="ACTIVITY_TYPES",T="ACTIVITY_APPLICABLES",A="PRIVILEGES",M="PRIVILEGE_CURRENT_ROLE",L="USER",P="LOADING",x="CMS_MODELS",O="CMS_CHANNELS",U="CMS_CHANNEL_CHILDREN",$="CMS_PARENT_CHANNEL",k="CMS_CURRENT_CHANNEL",H="CMS_CURRENT_MODEL",V="CMS_CONTENTS",D="CMS_CURRENT_CHANNEL_POSITION",Y="CMS_CURRENT_POSITION",j={state:{user:null,isCollapse:!1},getters:S()({isCollapse:function(t){return t.isCollapse}},L,function(t){if(t.user)return t.user;var n=localStorage.getItem(L);return JSON.parse(n)}),mutations:S()({toggleState:function(t){t.isCollapse=!t.isCollapse}},L,function(t,n){t.user=n,localStorage.setItem(L,R()(n))}),actions:S()({toggleState:function(t){(0,t.commit)("toggleState")},collapse:function(t){t.state.isCollapse=!0}},L,function(t,n){(0,t.commit)(L,n)})},F=e("//Fk"),B=e.n(F),Q=e("mtWM"),G=e.n(Q),q=this;function z(t){return Object(a.Message)({showClose:!0,message:t,type:"error",duration:3500})}G.a.interceptors.request.use(function(t){console.log("************"+dt.SITE_URL+"***************"),t.baseURL=dt.SITE_URL+"/api/",t.withCredentials=!0,t.timeout=6e3;var n=localStorage.getItem("accessToken");return n&&(t.headers={Authorization:"Bearer "+n,"Content-Type":"application/json",Accept:"application/json"}),t},function(t){B.a.reject(t)}),G.a.interceptors.response.use(function(t){var n=t.data;switch(parseInt(n.code)){case 200:case 301:case 304:break;case 401:z(n.code+n.error),window.location=u.a.ADMIN_URI+"/login",localStorage.setItem("accessToken","");break;case 402:default:z(n.code+n.error)}return t.data},function(t){return dt.$route.path!=u.a.ADMIN_URI+"/login"&&(q.$message.close(),localStorage.setItem("accessToken",""),z("请重新登录"),dt.$router.push(u.a.ADMIN_URI+"/login")),B.a.reject(t)});var J,X,K,Z,W,tt=G.a,nt={state:{activityTypes:[],activityApplicables:[]},getters:{activityTypes:function(t){return t.activityTypes},activityApplicables:function(t){return t.activityApplicables}},mutations:(J={},S()(J,N,function(t,n){t.activityTypes=n}),S()(J,T,function(t,n){t.activityApplicables=n}),J),actions:(X={},S()(X,N,function(t){var n=t.commit;tt.get("/admin/activity/types").then(function(t){console.log("types:",t),n(N,t.data.types)}).catch(function(t){console.log(t)})}),S()(X,T,function(t){var n=t.commit;tt.get("/admin/activity/applicables").then(function(t){console.log("types:",t),n(T,t.data.applicables)}).catch(function(t){console.log(t)})}),X)},et=e("fZjL"),ot=e.n(et),it={state:{loading:!1,models:[],channels:[],parentChannel:null,channelChildren:[],currentChannel:null,currentModel:null,currentChannelPosition:null,currentPosition:null},getters:{loading:function(t){return t.loading},models:function(t){return t.models},channels:function(t){return t.channels},channelChildren:function(t){return t.channelChildren},parentChannel:function(t){return t.parentChannel},currentChannel:function(t){return t.currentChannel},currentModel:function(t){return t.currentModel},currentChannelPosition:function(t){return t.currentChannelPosition},currentPosition:function(t){return t.currentPosition}},mutations:(K={},S()(K,P,function(t,n){t.loading=n}),S()(K,x,function(t,n){t.models=n}),S()(K,O,function(t,n){t.channels=n}),S()(K,U,function(t,n){t.channelChildren=n}),S()(K,$,function(t,n){t.parentChannel=n}),S()(K,k,function(t,n){t.currentChannel=n}),S()(K,H,function(t,n){t.currentModel=n}),S()(K,D,function(t,n){t.currentChannelPosition=n}),S()(K,Y,function(t,n){t.currentPosition=n}),K),actions:(Z={},S()(Z,x,function(t){var n=t.commit;n(P,!0),tt.get("/admin/cms/model").then(function(t){n(x,t.data),n(P,!1)})}),S()(Z,O,function(t,n){var e=t.commit,o=t.dispatch;e(P,!0),tt.get("/admin/cms/channel/tree",{params:{disabled:!0}}).then(function(t){if(ot()(t.data).length>0){var i=t.data[ot()(t.data)[0]];e(O,[i]),o(U,i),o($,i),n||o(k,i)}n&&(o($,n),o(U,n)),e(P,!1)})}),S()(Z,U,function(t,n){var e=t.commit;e(P,!0),tt.post("/admin/cms/channel/children",{parent_id:n.id}).then(function(t){e(U,t.data),e(P,!1)})}),S()(Z,$,function(t,n){(0,t.commit)($,n)}),S()(Z,k,function(t,n){(0,t.commit)(k,n)}),S()(Z,H,function(t,n){(0,t.commit)(H,n)}),Z)},at={state:{loading:!1,currentRole:null,privileges:[]},getters:{currentRole:function(t){return t.currentRole},privileges:function(t){return t.privileges}},mutations:(W={},S()(W,M,function(t,n){t.currentRole=n}),S()(W,A,function(t,n){t.privileges=n,localStorage.setItem("privileges",R()(n))}),W),actions:S()({},M,function(t,n){(0,t.commit)(M,n)})};i.default.use(c.a);var st=new c.a.Store({state:{accessToken:""},mutations:S()({},I,function(t,n){t.accessToken=n,localStorage.setItem("accessToken",n)}),getters:{accessToken:function(t){return localStorage.getItem("accessToken")}},modules:{system:j,activity:nt,cms:it,privilege:at}}),ct={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var rt=e("VU/8")({},ct,!1,function(t){e("wSDH")},null,null).exports;b.beforeEach(function(t,n,e){localStorage.getItem("accessToken")||"/login"==t.path?"/login"==t.path?(localStorage.setItem("accessToken",""),e()):e():e("/login")});var lt=e("pFYg"),ut=e.n(lt),pt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var ht={install:function(t,n){t.prototype.routerLink=function(){var t={},n=arguments[0]?arguments[0]:null;t.type=arguments[1]?arguments[1]:null,t.id=arguments[2]?arguments[2]:0,t.noce_str=function(t){for(var n="",e=0;e<t;e++){var o=Math.ceil(35*Math.random());n+=pt[o]}return n}(7);var e=arguments[3]?arguments[3]:null;if(null!=e){if("object"!=(void 0===e?"undefined":ut()(e)))throw new Exception("路由链接函数第四个参数只支持object类型");for(var o in e)t[o]=e[o]}b.push({path:n,query:t})},t.prototype.successMessage=function(t){this.$message({showClose:!0,message:t,type:"success",duration:1e3})},t.prototype.errorMessage=function(t){this.$message({showClose:!0,message:t,type:"error",duration:2500})},t.prototype.$getUrl=function(){},t.prototype.$reset=function(){window.location.reload()},t.prototype.$getNowDate=function(){var t=new Date,n=t.getMonth()+1,e=t.getDate();return n>=1&&n<=9&&(n="0"+n),e>=0&&e<=9&&(e="0"+e),t.getFullYear()+"-"+n+"-"+e}}};window.$=e("7t+N"),i.default.config.productionTip=!1,i.default.use(s.a),i.default.use(c.a),i.default.use(ht),i.default.prototype.$http=tt,i.default.prototype.$types=o,i.default.prototype.SITE_URL="";var dt=n.default=new i.default({el:"#app",router:b,store:st,components:{App:rt},template:"<App/>"})},UBeP:function(t,n){},aEO6:function(t,n){},pFkg:function(t,n,e){"use strict";t.exports={SITE_URL:"http://127.0.0.1:8000",ADMIN_URI:"/admin"}},wSDH:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.1e673715e84d41d794a4.js.map