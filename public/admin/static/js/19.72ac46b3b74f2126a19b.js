webpackJsonp([19],{PHtR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("gyMJ"),i=r("0XjM"),a=r.n(i);r("DmJO");function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,a){try{var o=t[i](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var s,u,c,l=function e(t){if(t.children.length){var r=!0,n=!1,i=void 0;try{for(var a,o=t.children[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){e(a.value)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}else t.children=void 0},m={components:{TreeSelect:a.a},data:function(){return{value:null,form:{id:"",name:"",department_id:null,parent_id:null,desiring:"",jd:""},departments:[],positions:[]}},watch:(s={},u="form.id",c=function(e){var t=this;return o(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=3;break}return r.next=3,t.getPositionDetail(e);case 3:case"end":return r.stop()}},r,t)}))()},u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,s),methods:{assignForm:function(e){this.form.id=e.id,this.form.name=e.name,this.form.department_id=e.department_id,this.form.parent_id=e.parent_id,this.form.desiring=e.desiring,this.form.jd=e.jd},getPositionDetail:function(e){var t=this;return o(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.a.sniperGetPositionDetail({id:e});case 2:i=r.sent,a=i.data,t.assignForm(a);case 5:case"end":return r.stop()}},r,t)}))()},normalizer:function(e){return{id:e.id,label:e.name,children:e.children}},viewPositions:function(){this.$router.push("/sniper/employee/position")},save:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.savePosition();case 2:(r=t.sent).hasError?e.showMessage(r.error):(n="添加成功！",e.form.id&&(n="更新成功！"),e.showMessage(n,"success"),e.$router.push("/sniper/employee/position"));case 4:case"end":return t.stop()}},t,e)}))()},getDepartments:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.sniperGetDepartmentsTreeSelect({});case 2:r=t.sent,i=Object.values(r.data)[0],l(i),e.departments=[i];case 6:case"end":return t.stop()}},t,e)}))()},getPositions:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.sniperGetPositionsTreeSelect({});case 2:r=t.sent,i=Object.values(r.data)[0],l(i),e.positions=[i];case 6:case"end":return t.stop()}},t,e)}))()},savePosition:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.sniperSavePosition(e.form);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDepartments();case 2:return t.next=4,e.getPositions();case 4:e.form.id=parseInt(e.$route.query.id)||0,(r=parseInt(e.$route.query.parent_id)||0)&&(e.form.parent_id=r);case 7:case"end":return t.stop()}},t,e)}))()}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"title",rawName:"v-title",value:"添加职位",expression:"'添加职位'"}]}),e._v(" "),r("div",{staticClass:"l-block"},[r("div",{staticClass:"l-block-header"},[r("div",{staticClass:"l-flex"},[r("span",[e._v("员工系统 / "),r("span",{staticStyle:{cursor:"pointer"},on:{click:e.viewPositions}},[e._v("职位管理")]),e._v(" / 添加职位")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)]),e._v(" "),r("div",{staticClass:"l-block-body"},[r("el-form",{ref:"form",staticStyle:{width:"50%","overflow-y":"visible"},attrs:{model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"职位名称"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属部门"}},[r("tree-select",{attrs:{multiple:!1,options:e.departments,"default-expand-level":10,normalizer:e.normalizer},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上级职位"}},[r("tree-select",{attrs:{multiple:!1,options:e.positions,"default-expand-level":10,normalizer:e.normalizer},model:{value:e.form.parent_id,callback:function(t){e.$set(e.form,"parent_id",t)},expression:"form.parent_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所需员工数"}},[r("el-input",{model:{value:e.form.desiring,callback:function(t){e.$set(e.form,"desiring",t)},expression:"form.desiring"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工作描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.jd,callback:function(t){e.$set(e.form,"jd",t)},expression:"form.jd"}})],1)],1)],1)])])},staticRenderFns:[]};var d=r("VU/8")(m,f,!1,function(e){r("flOv")},"data-v-4a5b5da2",null);t.default=d.exports},flOv:function(e,t){}});
//# sourceMappingURL=19.72ac46b3b74f2126a19b.js.map