webpackJsonp([6],{"7S/V":function(e,t){},Pqn3:function(e,t){},idzw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("gyMJ"),r=n("NYxO"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var a={data:function(){return{customProps:{children:"children",label:"name"},treeData:[]}},props:{title:{type:String,default:""},selectedKey:{type:Number,default:0}},watch:{},computed:o({},Object(r.b)([])),methods:{handleNodeClick:function(e){this.$emit("nodeClick",e)}},mounted:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.sniperGetPositionDescendants();case 2:(n=e.sent).hasError||(t.treeData=[Object.values(n.data)[0]],t.$emit("treeLoaded",t.treeData[0]));case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})})()}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-tree-container"},[e.title?n("view",[e._v(e._s(e.title))]):e._e(),e._v(" "),n("el-tree",{ref:"tree",attrs:{"icon-class":"el-icon-caret-right","default-expand-all":!0,data:e.treeData,"node-key":"id",props:e.customProps,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[r.children.length?e._e():n("span",{staticClass:"iconfont"},[e._v("")]),e._v(e._s(i.label))])])}}])})],1)},staticRenderFns:[]};function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}var l={components:{PositionTree:n("VU/8")(a,s,!1,function(e){n("Pqn3")},null,null).exports},data:function(){return{id:0,position:{},loading:!1}},methods:{performTreeLoaded:function(e){this.position=e},handleNodeClick:function(e){var t=e;this.position=t},edit:function(){this.$router.push("/sniper/employee/position/edit?id="+this.position.id)},add:function(){var e=this.position.id;this.$router.push("/sniper/employee/position/edit?parent_id="+e)},editPosition:function(e){var t=e.id;this.$router.push("/sniper/employee/position/edit?id="+t)},addPosition:function(e){var t=e.id;this.$router.push("/sniper/employee/position/edit?parent_id="+t)},deletePosition:function(e){var t=this,n=e.id;return c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm("确定删除职位?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.sniperDeletePosition({id:n});case 2:e.sent.hasError||(t.showMessage("删除成功！","success"),t.position.children=t.position.children.filter(function(e){return e.id!=n}));case 4:case"end":return e.stop()}},e,t)})));case 1:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.id=parseInt(e.$route.query.id)||0;case 1:case"end":return t.stop()}},t,e)}))()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-position-list"},[n("div",{directives:[{name:"title",rawName:"v-title",value:"职位管理",expression:"'职位管理'"}]}),e._v(" "),n("position-tree",{staticClass:"l-tree",attrs:{selectedKey:2},on:{nodeClick:e.handleNodeClick,treeLoaded:e.performTreeLoaded}}),e._v(" "),n("div",{staticClass:"l-tree-content"},[n("div",{staticClass:"l-block"},[n("div",{staticClass:"l-block-header",staticStyle:{"padding-right":"20px",width:"100%"}},[n("div",{staticClass:"l-flex"},[n("span",[n("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "+e._s(e.position.name?e.position.name:""))]),e._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[n("i",{staticClass:"iconfont"},[e._v("")]),e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"small"},on:{click:e.add}},[n("i",{staticClass:"iconfont"},[e._v("")]),e._v("新增")])],1)],1)]),e._v(" "),n("div",{staticClass:"l-block-body"},[n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.position,expression:"position"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.position.children,"empty-text":"暂无下级职位"}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"职位名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"parent.name",label:"上级职位名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"department.name",label:"所属部门"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desiring",label:"所需员工"}}),e._v(" "),n("el-table-column",{attrs:{width:"220",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"l-lighter",attrs:{type:"text"},on:{click:function(n){return e.editPosition(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticClass:"l-lighter",attrs:{type:"text"},on:{click:function(n){return e.deletePosition(t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)},staticRenderFns:[]};var d=n("VU/8")(l,u,!1,function(e){n("7S/V")},"data-v-76a0d565",null);t.default=d.exports}});
//# sourceMappingURL=6.9e73e9f89d412224bd2d.js.map