webpackJsonp([18],{"5l2l":function(t,e){},"6NOn":function(t,e){},B3t3:function(t,e){},JjbI:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={};n.d(o,"ACCESS_TOKEN",function(){return A}),n.d(o,"ACTIVITY_TYPES",function(){return E}),n.d(o,"ACTIVITY_APPLICABLES",function(){return N}),n.d(o,"PRIVILEGES",function(){return x}),n.d(o,"LOADING",function(){return L}),n.d(o,"CMS_MODELS",function(){return R}),n.d(o,"CMS_CHANNELS",function(){return $}),n.d(o,"CMS_CHANNEL_CHILDREN",function(){return M}),n.d(o,"CMS_CONTENTS",function(){return P});var i=n("7+uW"),a=n("zL8q"),s=n.n(a),c=(n("QrFr"),n("UBeP"),n("NYxO")),r=n("/ocq"),l=n("pFkg"),u=n.n(l),p={methods:{toggleCollapse:function(){this.$store.dispatch("toggleState")},logout:function(){var t=this;this.$http.post("auth/logout").then(function(e){200==e.code?(t.$store.commit(t.$types.ACCESS_TOKEN,""),t.$router.push(u.a.ADMIN_URI+"/login")):401==e.code&&t.$router.push(u.a.ADMIN_URI+"/login")})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ls-top-wrap"},[n("div",{staticClass:"ls-top-left"},[n("div",{staticClass:"ls-icon-collapse",on:{click:t.toggleCollapse}},[n("i",{staticClass:"iconfont l-color"},[t._v("")])])]),t._v(" "),n("div",{staticClass:"ls-top-right"},[n("el-dropdown",[n("div",{staticClass:"logout"},[n("i",{staticClass:"iconfont"},[t._v(" ")]),t._v("个人")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("div",{on:{click:t.logout}},[n("i",{staticClass:"iconfont"},[t._v(" ")]),t._v("登出")])]),t._v(" "),n("el-dropdown-item",[n("i",{staticClass:"iconfont"},[t._v(" ")]),t._v("修改密码")])],1)],1)],1)])},staticRenderFns:[]};var h=n("VU/8")(p,d,!1,function(t){n("JjbI")},"data-v-6c5502a2",null).exports,m={name:"cell",props:{item:{type:Object,default:{}},type:{type:String}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item.meta.show?n(t.type,{tag:"div",staticClass:"unselectable",attrs:{index:t.item.path}},["el-submenu"===t.type?[n("template",{slot:"title"},[n("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(t.item.meta.font)}}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.name))])]),t._v(" "),t._l(t.item.children,function(t){return[n("cell",{attrs:{item:t,type:t.children&&t.children.filter(function(t){return t.meta.show}).length?"el-submenu":"el-menu-item"}})]})]:t._e(),t._v(" "),"el-menu-item"===t.type?[n("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(t.item.meta.font)}}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.name))])]:t._e()],2):t._e()},staticRenderFns:[]},v={components:{cell:n("VU/8")(m,f,!1,null,null,null).exports},data:function(){return{defaultActive:"",router:b,privileges:[]}},computed:{isCollapse:function(){return this.$store.state.system.isCollapse}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},resetVisible:function(t,e){var n=this;t.map(function(t,o){t.hasOwnProperty("children")&&(t.children.map(function(n,o){-1===e.indexOf(t.children[o].meta.can)&&(t.children[o].meta.show=!1)}),n.resetVisible(t.children,e))})},loadUserPermissions:function(){var t=this;this.$http.get("/admin/privileges/user/permissions").then(function(e){t.privileges=e.data,t.$store.commit(t.$types.PRIVILEGES,e.data);var n=t.router.options.routes;t.resetVisible(n,t.privileges)})}},created:function(){this.defaultActive=this.$route.path,this.loadUserPermissions()}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapse,expression:"!isCollapse"}],staticClass:"ls-top-logo"},[t._v("路章の博客")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],staticClass:"ls-top-logo-narrow"},[t._v("路")]),t._v(" "),n("el-menu",{ref:"sidemenu",staticClass:"el-menu-vertical",attrs:{"unique-opened":!0,router:"","default-active":t.defaultActive,collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},[t._l(t.router.options.routes,function(e,o){return[e.children&&e.children.filter(function(t){return t.meta.show}).length?[t._l(e.children,function(t){return[n("cell",{attrs:{item:t,type:t.children&&e.children.filter(function(t){return t.meta.show}).length?"el-submenu":"el-menu-item"}})]})]:t._e()]})],2)],1)},staticRenderFns:[]};var y={components:{"backend-top":h,"backend-menu":n("VU/8")(v,g,!1,function(t){n("6NOn"),n("B3t3")},"data-v-0e935128",null).exports},computed:{isCollapse:function(){return this.$store.state.system.isCollapse}},mounted:function(){this.$store.dispatch(this.$types.ACTIVITY_TYPES),this.$store.dispatch(this.$types.ACTIVITY_APPLICABLES)}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{staticClass:"ls-container"},[e("div",{staticClass:"ls-aside"},[e("div",{staticClass:"ls-left"},[e("backend-menu")],1)]),this._v(" "),e("div",{staticClass:"ls-content"},[e("div",{staticClass:"ls-top"},[e("backend-top")],1),this._v(" "),e("div",{staticClass:"ls-main"},[e("div",{staticStyle:{"box-sizing":"border-box",background:"#fff",padding:"20px","min-height":"100%"}},[e("router-view")],1)])])])},staticRenderFns:[]};var _=n("VU/8")(y,C,!1,function(t){n("5l2l")},"data-v-327659db",null).exports;i.default.use(r.a);var b=new r.a({mode:"history",base:"/admin/",saveScrollPosition:"true",routes:[{path:"/",component:_,meta:{can:"",show:!1,name:"根菜单"},children:[{path:"/dashboard",component:function(t){return n.e(16).then(function(){var e=[n("XRHL")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"dashboard",show:!0,name:"面板",font:"&#xe764;"}},{path:"/cms",component:function(t){return n.e(0).then(function(){var e=[n("RRQr")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"cms",show:!0,name:"内容管理",font:"&#xe764;"},children:[{path:"/cms/channel",component:function(t){return n.e(7).then(function(){var e=[n("J4LN")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"cms list channels",show:!0,name:"栏目管理",font:"&#xe764;"}},{path:"/cms/content",component:function(t){return n.e(2).then(function(){var e=[n("rh17")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"cms list contents",show:!0,name:"内容管理",font:"&#xe764;"}},{path:"/cms/setting",component:function(t){return n.e(0).then(function(){var e=[n("RRQr")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"cms list contents",show:!0,name:"设置",font:"&#xe764;"},children:[{path:"/cms/setting/model",component:function(t){return n.e(3).then(function(){var e=[n("PaIR")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"dashboard",show:!0,name:"模型管理",font:"&#xe764;"}},{path:"/cms/setting/model/add",component:function(t){return n.e(1).then(function(){var e=[n("mPFa")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"dashboard",show:!1,name:"添加模型",font:"&#xe764;"}},{path:"/cms/setting/model/edit/:id",component:function(t){return n.e(1).then(function(){var e=[n("mPFa")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"dashboard",show:!1,name:"编辑模型",font:"&#xe764;"}},{path:"/cms/setting/field/types",component:function(t){return n.e(10).then(function(){var e=[n("6dud")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"dashboard",show:!0,name:"字段类型",font:"&#xe764;"}}]}]},{path:"/activity",component:function(t){return n.e(0).then(function(){var e=[n("RRQr")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"activity",show:!0,name:"活动管理",font:"&#xe6c5;"},children:[{path:"/activity/list",component:function(t){return n.e(13).then(function(){var e=[n("Pvz1")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"activity list",show:!0,name:"活动列表",font:"&#xe6a3;"}},{path:"/activity/add",component:function(t){return n.e(12).then(function(){var e=[n("70YF")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"add activity",show:!0,name:"添加活动",font:"&#xe663;"}},{path:"/activity/edit",component:function(t){return n.e(8).then(function(){var e=[n("A7xX")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"edit activity",show:!1,name:"编辑活动",font:""}}]},{path:"/pdd",component:function(t){return n.e(0).then(function(){var e=[n("RRQr")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"pdd",name:"拼多多",font:"&#xe711;"},children:[{path:"/pdd/cat",component:function(t){return n.e(15).then(function(){var e=[n("XwZp")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"pdd cat goods",show:!0,name:"分类商品",font:"&#xe711;"}},{path:"/pdd/orders",component:function(t){return n.e(9).then(function(){var e=[n("M7eE")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"pdd orders",show:!0,name:"订单",font:"&#xe62f;"}}]},{path:"/privileges",component:function(t){return n.e(0).then(function(){var e=[n("RRQr")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"privileges",show:!0,name:"权限系统",font:"&#xe70b;"},children:[{path:"/privileges/roles",component:function(t){return n.e(5).then(function(){var e=[n("gYjH")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"privileges list roles",show:!0,name:"角色管理",font:"&#xe612;"}},{path:"/privileges/permissions",component:function(t){return n.e(11).then(function(){var e=[n("YMpQ")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"privileges list permissions",show:!0,name:"权限管理",font:"&#xe70b;"}},{path:"/privileges/roles/users/:id",component:function(t){return n.e(14).then(function(){var e=[n("glAp")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"privileges list role users",show:!1,name:"角色用户",font:""}},{path:"/privileges/roles/permissions/:id",component:function(t){return n.e(6).then(function(){var e=[n("js6L")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{can:"privileges role permissions",show:!1,name:"角色权限",font:""}}]}]},{path:"/login",component:function(t){return n.e(4).then(function(){var e=[n("Luci")];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{name:"登录"}}]}),w=n("bOdI"),I=n.n(w),S=n("mvHQ"),T=n.n(S),A="ACCESS_TOKEN",E="ACTIVITY_TYPES",N="ACTIVITY_APPLICABLES",x="PRIVILEGES",L="LOADING",R="CMS_MODELS",$="CMS_CHANNELS",M="CMS_CHANNEL_CHILDREN",P="CMS_CONTENTS",k={state:{isCollapse:!1,privileges:[]},getters:{isCollapse:function(t){return t.isCollapse},privileges:function(t){return t.privileges}},mutations:I()({toggleState:function(t){t.isCollapse=!t.isCollapse}},x,function(t,e){t.privileges=e,console.log(".............from store.............."),localStorage.setItem("privileges",T()(e))}),actions:{toggleState:function(t){(0,t.commit)("toggleState")}}},O=n("//Fk"),U=n.n(O),V=n("mtWM"),D=n.n(V);function F(t){return Object(a.Message)({showClose:!0,message:t,type:"error",duration:3500})}D.a.interceptors.request.use(function(t){t.baseURL=u.a.SITE_URL+"/api/",t.withCredentials=!0,t.timeout=6e3;var e=localStorage.getItem("accessToken");return e&&(t.headers={Authorization:"Bearer "+e,"Content-Type":"application/json"}),t},function(t){U.a.reject(t)}),D.a.interceptors.response.use(function(t){var e=t.data,n=parseInt(e.code);e.error;switch(n){case 200:case 301:case 304:break;case 401:window.location=u.a.ADMIN_URI+"/login",localStorage.setItem("accessToken","");break;default:F(e.code+":"+e.error)}return t.data},function(t){return ot.$route.path!=u.a.ADMIN_URI+"/login"&&(localStorage.setItem("accessToken",""),F("服务器响应失败"),ot.$router.push(u.a.ADMIN_URI+"/login")),U.a.reject(t)});var Y,H,j,Q,B=D.a,G={state:{activityTypes:[],activityApplicables:[]},getters:{activityTypes:function(t){return t.activityTypes},activityApplicables:function(t){return t.activityApplicables}},mutations:(Y={},I()(Y,E,function(t,e){t.activityTypes=e}),I()(Y,N,function(t,e){t.activityApplicables=e}),Y),actions:(H={},I()(H,E,function(t){var e=t.commit;B.get("/admin/activity/types").then(function(t){console.log("types:",t),e(E,t.data.types)}).catch(function(t){console.log(t)})}),I()(H,N,function(t){var e=t.commit;B.get("/admin/activity/applicables").then(function(t){console.log("types:",t),e(N,t.data.applicables)}).catch(function(t){console.log(t)})}),H)},q=n("fZjL"),J=n.n(q),Z={state:{loading:!1,models:[],channels:[],channelChildren:[]},getters:{loading:function(t){return t.loading},models:function(t){return t.models},channels:function(t){return t.channels},channelChildren:function(t){return t.channelChildren}},mutations:(j={},I()(j,L,function(t,e){t.loading=e}),I()(j,R,function(t,e){t.models=e}),I()(j,$,function(t,e){t.channels=e}),I()(j,M,function(t,e){t.channelChildren=e}),j),actions:(Q={},I()(Q,R,function(t){var e=t.commit;e(L,!0),B.get("/admin/cms/model").then(function(t){e(R,t.data),e(L,!1)})}),I()(Q,$,function(t,e){var n=t.commit,o=t.dispatch;n(L,!0),B.get("/admin/cms/channel/tree",{params:{disabled:!0}}).then(function(t){var i=[t.data[J()(t.data)[0]]];n($,i),n(L,!1),o(M,e||i[0])})}),I()(Q,M,function(t,e){var n=t.commit;n(L,!0),B.post("/admin/cms/channel/children",{parent_id:e.id}).then(function(t){n(M,t.data),n(L,!1)})}),Q)};i.default.use(c.a);var z=new c.a.Store({state:{accessToken:""},mutations:I()({},A,function(t,e){t.accessToken=e,localStorage.setItem("accessToken",e)}),getters:{accessToken:function(t){return localStorage.getItem("accessToken")}},modules:{system:k,activity:G,cms:Z}}),K={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var X=n("VU/8")({},K,!1,function(t){n("ymNZ")},null,null).exports;b.beforeEach(function(t,e,n){localStorage.getItem("accessToken")||"/login"==t.path?"/login"==t.path?(localStorage.setItem("accessToken",""),n()):n():n("/login")});var W=n("pFYg"),tt=n.n(W),et=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var nt={install:function(t,e){t.prototype.routerLink=function(){var t={},e=arguments[0]?arguments[0]:null;t.type=arguments[1]?arguments[1]:null,t.id=arguments[2]?arguments[2]:0,t.noce_str=function(t){for(var e="",n=0;n<t;n++){var o=Math.ceil(35*Math.random());e+=et[o]}return e}(7);var n=arguments[3]?arguments[3]:null;if(null!=n){if("object"!=(void 0===n?"undefined":tt()(n)))throw new Exception("路由链接函数第四个参数只支持object类型");for(var o in n)t[o]=n[o]}b.push({path:e,query:t})},t.prototype.successMessage=function(t){this.$message({showClose:!0,message:t,type:"success",duration:1e3})},t.prototype.errorMessage=function(t){this.$message({showClose:!0,message:t,type:"error",duration:2500})},t.prototype.$getUrl=function(){},t.prototype.$reset=function(){window.location.reload()},t.prototype.$getNowDate=function(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return e>=1&&e<=9&&(e="0"+e),n>=0&&n<=9&&(n="0"+n),t.getFullYear()+"-"+e+"-"+n}}};window.$=n("7t+N"),i.default.config.productionTip=!1,i.default.use(s.a),i.default.use(c.a),i.default.use(nt),i.default.prototype.$http=B,i.default.prototype.$types=o;var ot=e.default=new i.default({el:"#app",router:b,store:z,components:{App:X},template:"<App/>"})},QrFr:function(t,e){},UBeP:function(t,e){},pFkg:function(t,e,n){"use strict";t.exports={SITE_URL:"http://127.0.0.1:8000",ADMIN_URI:"/admin"}},ymNZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6ab3c0d462f632ccd6f8.js.map