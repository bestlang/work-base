webpackJsonp([7],{bwyj:function(t,e){},glAp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("woOf"),l=o.n(s),a={data:function(){return{showForm:!1,total:0,tableData:[],roleName:"",form:{role_id:this.$route.params.id,mobile:"",password:"",confirm_password:"",name:""}}},computed:{types:function(){return this.$store.getters.activityTypes},currentRole:function(){return this.$store.getters.currentRole}},methods:{addNewUser:function(){this.showForm=!0,l()(this.form,{mobile:"",password:"",confirm_password:"",name:""})},doAddNewUser:function(){var t=this;this.$http.post("/admin/user/create/role/user",this.form).then(function(e){e.success?(t.loadRoleUsers(),t.showForm=!1):t.$message({type:"error",message:e.error})})},handleRemove:function(t){var e=this;this.$confirm("确认移出该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/admin/privileges/remove/role/model",t.pivot).then(function(t){t.success?e.loadRoleUsers():e.$message({type:"error",message:t.error})})}).catch(function(){})},loadRoleUsers:function(){var t=this;this.$http.get("/admin/privileges/role/users/"+this.currentRole.id).then(function(e){t.roleName=e.data.name,t.tableData=e.data.users})}},mounted:function(){this.loadRoleUsers()}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"top-buttons",staticStyle:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between"}},[o("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[o("router-link",{attrs:{to:"/privileges/roles",tag:"div"}},[o("span",{staticClass:"iconfont"},[t._v("")]),t._v("返回")]),t._v(" "),o("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),o("div",[t._v("所属「"+t._s(t.roleName)+"」用户列表")])],1),t._v(" "),o("div",[o("el-button",{attrs:{type:"primary"},on:{click:t.addNewUser}},[o("i",{staticClass:"iconfont"},[t._v("")]),t._v(" 添加")])],1)]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"cell-class-name":"cell-class","header-cell-class-name":"cell-class"}},[o("el-table-column",{attrs:{prop:"name",label:"昵称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"id",label:"id",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"small"},on:{click:function(o){return t.handleRemove(e.row)}}},[t._v("移出")])]}}])})],1),t._v(" "),o("div",{staticClass:"l-delimiter"}),t._v(" "),o("el-dialog",{attrs:{title:"添加用户",visible:t.showForm,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showForm=e}}},[o("el-form",{attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"手机号"}},[o("el-input",{staticClass:"l-w-200",attrs:{autocomplete:"off"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{staticClass:"l-w-200",attrs:{autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"确认密码"}},[o("el-input",{staticClass:"l-w-200",attrs:{autocomplete:"off"},model:{value:t.form.confirm_password,callback:function(e){t.$set(t.form,"confirm_password",e)},expression:"form.confirm_password"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"昵称"}},[o("el-input",{staticClass:"l-w-200",attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.showForm=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.doAddNewUser}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(a,r,!1,function(t){o("bwyj")},"data-v-9a8c7464",null);e.default=i.exports}});
//# sourceMappingURL=7.41921ed8a70aa6af6957.js.map