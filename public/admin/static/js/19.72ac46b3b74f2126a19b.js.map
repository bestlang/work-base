{"version":3,"sources":["webpack:///src/pages/sniper/employee/basic/positionEdit.vue","webpack:///./src/pages/sniper/employee/basic/positionEdit.vue?f2e7","webpack:///./src/pages/sniper/employee/basic/positionEdit.vue"],"names":["removeEmptyChildren","data","children","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","return","positionEdit","components","TreeSelect","vue_treeselect_cjs_default","a","form","id","name","department_id","parent_id","desiring","jd","departments","positions","watch","val","_this","this","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","getPositionDetail","stop","methods","assignForm","position","_this2","_callee2","_ref","_context2","api","sniperGetPositionDetail","sent","normalizer","node","label","viewPositions","$router","push","save","_this3","_callee3","res","msg","_context3","savePosition","hasError","showMessage","error","getDepartments","_this4","_callee4","root","_context4","sniperGetDepartmentsTreeSelect","Object","values","getPositions","_this5","_callee5","_context5","sniperGetPositionsTreeSelect","_this6","_callee6","_context6","sniperSavePosition","abrupt","mounted","_this7","_callee7","_context7","parseInt","$route","query","basic_positionEdit","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","_v","staticClass","staticStyle","cursor","on","click","attrs","type","ref","width","overflow-y","model","label-width","callback","$$v","$set","multiple","options","default-expand-level","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.72ac46b3b74f2126a19b.js","sourcesContent":["<template>\r\n    <div>\r\n        <div v-title=\"'添加职位'\"></div>\r\n        <div class=\"l-block\">\r\n            <div class=\"l-block-header\">\r\n                <div class=\"l-flex\">\r\n                    <span>员工系统 / <span @click=\"viewPositions\" style=\"cursor: pointer;\">职位管理</span> / 添加职位</span>\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"l-block-body\">\r\n\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"100px\" style=\"width: 50%;overflow-y: visible\">\r\n                    <el-form-item label=\"职位名称\">\r\n                        <el-input v-model=\"form.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所属部门\">\r\n                        <tree-select v-model=\"form.department_id\" :multiple=\"false\" :options=\"departments\"  :default-expand-level=\"10\" :normalizer=\"normalizer\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"上级职位\">\r\n                        <tree-select v-model=\"form.parent_id\" :multiple=\"false\" :options=\"positions\"  :default-expand-level=\"10\" :normalizer=\"normalizer\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所需员工数\">\r\n                        <el-input v-model=\"form.desiring\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"工作描述\">\r\n                        <el-input type=\"textarea\" v-model=\"form.jd\"></el-input>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import api from '@/api/index'\r\n    import TreeSelect from '@riophae/vue-treeselect'\r\n    import '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\n    const removeEmptyChildren = function(data){\r\n        if(!data.children.length){\r\n            data.children = undefined\r\n        }else{\r\n            for(let child of data.children){\r\n                removeEmptyChildren(child)\r\n            }\r\n        }\r\n    }\r\n\r\n    export default {\r\n        components: { TreeSelect },\r\n        data(){\r\n            return {\r\n                value: null,\r\n                form: {\r\n                    id: '',\r\n                    name: '',\r\n                    department_id: null,\r\n                    parent_id: null,\r\n                    desiring: '',\r\n                    jd: ''\r\n                },\r\n                departments: [],\r\n                positions: []\r\n            }\r\n        },\r\n        watch:{\r\n            async  ['form.id'](val){\r\n                if(val){\r\n                    await this.getPositionDetail(val)\r\n                }\r\n            }\r\n        },\r\n        methods:{\r\n            assignForm(position){\r\n                this.form.id = position.id\r\n                this.form.name = position.name\r\n                this.form.department_id = position.department_id\r\n                this.form.parent_id = position.parent_id\r\n                this.form.desiring = position.desiring\r\n                this.form.jd = position.jd\r\n            },\r\n            async getPositionDetail(id){\r\n                let {data} = await api.sniperGetPositionDetail({id});\r\n                this.assignForm(data)\r\n            },\r\n            //tree select 节点数据适应\r\n            normalizer(node) {\r\n                return {\r\n                    id: node.id,\r\n                    label: node.name,\r\n                    children: node.children,\r\n                }\r\n            },\r\n            viewPositions(){\r\n                this.$router.push('/sniper/employee/position')\r\n            },\r\n            async save(){\r\n                let res = await this.savePosition()\r\n                if(res.hasError){\r\n                    this.showMessage(res.error)\r\n                }else{\r\n                    let msg = '添加成功！';\r\n                    if(this.form.id){\r\n                        msg = '更新成功！';\r\n                    }\r\n                    this.showMessage(msg, 'success')\r\n                    this.$router.push('/sniper/employee/position')\r\n                }\r\n            },\r\n            async getDepartments(){\r\n                let res = await api.sniperGetDepartmentsTreeSelect({})\r\n                let root = Object.values(res.data)[0]\r\n                //处理数据 适应TreeSelect组件\r\n                removeEmptyChildren(root)\r\n                this.departments = [root]\r\n            },\r\n            async getPositions(){\r\n                let res = await api.sniperGetPositionsTreeSelect({})\r\n                let root = Object.values(res.data)[0]\r\n                //处理数据 适应TreeSelect组件\r\n                removeEmptyChildren(root)\r\n                this.positions = [root]\r\n            },\r\n            async savePosition(){\r\n                let res = await api.sniperSavePosition(this.form)\r\n                return res\r\n            }\r\n        },\r\n        async mounted(){\r\n            await this.getDepartments()\r\n            await this.getPositions()\r\n            this.form.id = parseInt(this.$route.query.id) || 0;\r\n            let parent_id = parseInt(this.$route.query.parent_id) || 0;\r\n            if(parent_id){\r\n                this.form.parent_id = parent_id;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    .el-form-item__content  /deep/  .vue-treeselect__menu-container{\r\n        z-index: 9999;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/sniper/employee/basic/positionEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"title\",rawName:\"v-title\",value:('添加职位'),expression:\"'添加职位'\"}]}),_vm._v(\" \"),_c('div',{staticClass:\"l-block\"},[_c('div',{staticClass:\"l-block-header\"},[_c('div',{staticClass:\"l-flex\"},[_c('span',[_vm._v(\"员工系统 / \"),_c('span',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":_vm.viewPositions}},[_vm._v(\"职位管理\")]),_vm._v(\" / 添加职位\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"l-block-body\"},[_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"50%\",\"overflow-y\":\"visible\"},attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"职位名称\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属部门\"}},[_c('tree-select',{attrs:{\"multiple\":false,\"options\":_vm.departments,\"default-expand-level\":10,\"normalizer\":_vm.normalizer},model:{value:(_vm.form.department_id),callback:function ($$v) {_vm.$set(_vm.form, \"department_id\", $$v)},expression:\"form.department_id\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上级职位\"}},[_c('tree-select',{attrs:{\"multiple\":false,\"options\":_vm.positions,\"default-expand-level\":10,\"normalizer\":_vm.normalizer},model:{value:(_vm.form.parent_id),callback:function ($$v) {_vm.$set(_vm.form, \"parent_id\", $$v)},expression:\"form.parent_id\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所需员工数\"}},[_c('el-input',{model:{value:(_vm.form.desiring),callback:function ($$v) {_vm.$set(_vm.form, \"desiring\", $$v)},expression:\"form.desiring\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"工作描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.jd),callback:function ($$v) {_vm.$set(_vm.form, \"jd\", $$v)},expression:\"form.jd\"}})],1)],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a5b5da2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/sniper/employee/basic/positionEdit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a5b5da2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./positionEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./positionEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./positionEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a5b5da2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./positionEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a5b5da2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/sniper/employee/basic/positionEdit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}