webpackJsonp([7],{gYjH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("woOf"),l=i.n(s),o={data:function(){return{total:0,params:{page:1,page_size:10},tableData:[],formVisible:!1,formTitle:"添加角色",form:{id:"",name:""}}},computed:{types:function(){return this.$store.getters.activityTypes}},methods:{editRole:function(t){this.formVisible=!0,this.form=l()(this.form,{id:t.id,name:t.name})},handleSubmit:function(){var t=this;this.$http.post("/admin/privileges/save/role",this.form).then(function(e){e.success&&(t.formVisible=!1,t.loadRoles())})},viewRoleUsers:function(t){this.$store.dispatch(this.$types.PRIVILEGE_CURRENT_ROLE,t),this.$router.push("/privileges/roles/users")},editRolePermissions:function(t){this.$store.dispatch(this.$types.PRIVILEGE_CURRENT_ROLE,t),this.$router.push("/privileges/roles/permissions")},handleDelete:function(t){var e=this;this.$confirm("确认删除该角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/admin/privileges/delete/role/"+t.id).then(function(t){t.success?(e.$message({type:"success",message:"删除成功!"}),e.loadRoles()):e.$message({type:"info",message:t.error})})}).catch(function(){})},addActivity:function(){},loadRoles:function(){var t=this;this.$http.get("/admin/privileges/roles",{params:this.params}).then(function(e){t.tableData=e.data})}},mounted:function(){this.loadRoles()}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-block"},[i("div",{directives:[{name:"title",rawName:"v-title",value:"角色管理",expression:"'角色管理'"}]}),t._v(" "),i("div",{staticClass:"l-block-header"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.formVisible=!0}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v(" 添加")])],1),t._v(" "),i("div",{staticClass:"l-block-body"},[i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"cell-class-name":"cell-class","header-cell-class-name":"cell-class"}},[i("el-table-column",{attrs:{prop:"name",label:"角色名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"guard_name",label:"guard",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"medium"},on:{click:function(i){return t.editRole(e.row)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("编辑")]),t._v(" "),i("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"medium"},on:{click:function(i){return t.handleDelete(e.row)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("删除")]),t._v(" "),i("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"medium"},on:{click:function(i){return t.editRolePermissions(e.row)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("权限")]),t._v(" "),i("el-button",{staticClass:"l-inline-btn",attrs:{type:"text",size:"medium"},on:{click:function(i){return t.viewRoleUsers(e.row)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("成员")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"l-delimiter"}),t._v(" "),i("el-dialog",{attrs:{title:t.formTitle,visible:t.formVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"角色名称"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var a=i("VU/8")(o,n,!1,function(t){i("tCUk")},"data-v-7e9c7fa8",null);e.default=a.exports},tCUk:function(t,e){}});
//# sourceMappingURL=7.a7865a1a176d6c6e2122.js.map