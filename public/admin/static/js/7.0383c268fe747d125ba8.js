webpackJsonp([7],{Aaxj:function(e,t){},J4LN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("woOf"),a=n.n(l),s={data:function(){return{customProps:{children:"children",label:"name"},title:"添加子栏目",showChannelChildren:!0,showChannelForm:!1,parentChanel:{id:"",parent_id:"",name:"",model_id:"",title:"",keywords:"",description:""},channelForm:{id:"",parent_id:"",name:"",model_id:"",title:"",keywords:"",description:""}}},computed:{loading:function(){return this.$store.getters.loading},treeData:function(){return this.$store.getters.channels},children:function(){return this.$store.getters.channelChildren},models:function(){return this.$store.getters.models}},methods:{addChannel:function(e){this.showChannelForm=!0,a()(this.channelForm,{id:"",parent_id:e.id,name:"",title:"",keywords:"",description:""})},editChannel:function(e){this.showChannelForm=!0,this.title="编辑栏目",a()(this.channelForm,e)},deleteChannel:function(e){var t=this;this.$confirm("确定删除本栏目?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/admin/cms/channel/delete",{id:e.id}).then(function(n){n.success?(t.$store.dispatch(t.$types.CMS_CHANNELS,{id:e.parent_id}),t.showChannelChildren=!0,t.$message({type:"success",message:"删除成功!"})):t.$message({type:"error",message:n.error})}).catch(function(){})})},handleNodeClick:function(e){e.children.length>0?(this.$store.dispatch(this.$types.CMS_CHANNEL_CHILDREN,e),this.showChannelChildren=!0,a()(this.parentChanel,e)):(this.showChannelChildren=!1,a()(this.channelForm,e))},doSubmit:function(){this.channelForm.id?this.doEdit():this.doAdd()},doCancel:function(){this.showChannelForm=!1},doAdd:function(){var e=this;this.showChannelChildren=!1,this.$http.post("/admin/cms/channel/add",this.channelForm).then(function(t){t.success?(e.showChannelForm=!1,e.showChannelChildren=!0,e.$store.dispatch(e.$types.CMS_CHANNELS,{id:e.channelForm.parent_id}),e.$message({type:"success",message:"添加成功!"})):(e.$message({type:"error",message:t.error}),e.showChannelChildren=!0)})},doEdit:function(){var e=this;this.$http.post("/admin/cms/channel/update",this.channelForm).then(function(t){t.success&&(e.$message({type:"success",message:"修改成功!"}),e.$store.dispatch(e.$types.CMS_CHANNELS,{id:e.channelForm.parent_id}),e.showChannelChildren=!1,e.showChannelForm=!1)})}},mounted:function(){this.$store.dispatch("toggleState"),this.$store.dispatch(this.$types.CMS_CHANNELS),this.$store.dispatch(this.$types.CMS_MODELS)}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-channel-list"},[n("div",{staticClass:"l-tree-containner"},[n("el-tree",{ref:"tree",attrs:{"icon-class":"el-icon-caret-right","default-expand-all":!0,data:e.treeData,"node-key":"id",props:e.customProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[a.children.length?e._e():n("span",{staticClass:"iconfont"},[e._v("")]),e._v(e._s(l.label))])])}}])})],1),e._v(" "),n("div",{staticClass:"l-tree-content"},[e.showChannelChildren?n("div",{staticClass:"l-block"},[n("div",{staticClass:"l-block-header"},[n("span",[e._v(e._s(e.parentChanel.name))]),e._v(" "),n("el-button-group",[n("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:function(t){return e.editChannel(e.parentChanel)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:function(t){return e.addChannel(e.parentChanel)}}},[e._v("新增子栏目")])],1)],1),e._v(" "),n("div",{staticClass:"l-block-body"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.children}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"栏目名"}}),e._v(" "),n("el-table-column",{attrs:{width:"300",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.editChannel(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.addChannel(t.row)}}},[e._v("新增子栏目")]),e._v(" "),n("el-button",{attrs:{type:"text"}},[e._v("删除")])]}}],null,!1,3854960573)})],1)],1)]):e._e(),e._v(" "),e.showChannelChildren?e._e():n("div",{staticClass:"l-block l-channel-info"},[n("div",{staticClass:"l-block-header"},[n("span",[e._v(e._s(e.channelForm.name))]),e._v(" "),n("el-button-group",[n("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:function(t){return e.editChannel(e.channelForm)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:function(t){return e.deleteChannel(e.channelForm)}}},[e._v("删除")])],1)],1),e._v(" "),n("div",{staticClass:"l-block-body"},[n("ul",[n("li",[e._v("编号: "),n("span",[e._v(e._s(e.channelForm.id))])]),e._v(" "),n("li",[e._v("栏目名: "),n("span",[e._v(e._s(e.channelForm.name))])]),e._v(" "),n("li",[e._v("标题: "),n("span",[e._v(e._s(e.channelForm.title))])]),e._v(" "),n("li",[e._v("关键词: "),n("span",[e._v(e._s(e.channelForm.keywords))])]),e._v(" "),n("li",[e._v("描述: "),n("span",[e._v(e._s(e.channelForm.description))])])])])])]),e._v(" "),n("el-dialog",{attrs:{title:e.title,visible:e.showChannelForm},on:{"update:visible":function(t){e.showChannelForm=t}}},[n("el-form",{attrs:{model:e.channelForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"栏目名"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.channelForm.name,callback:function(t){e.$set(e.channelForm,"name",t)},expression:"channelForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"模型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.channelForm.model_id,callback:function(t){e.$set(e.channelForm,"model_id",t)},expression:"channelForm.model_id"}},e._l(e.models,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.channelForm.title,callback:function(t){e.$set(e.channelForm,"title",t)},expression:"channelForm.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"关键词"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.channelForm.keywords,callback:function(t){e.$set(e.channelForm,"keywords",t)},expression:"channelForm.keywords"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.channelForm.description,callback:function(t){e.$set(e.channelForm,"description",t)},expression:"channelForm.description"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.doSubmit}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:e.doCancel}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]};var i=n("VU/8")(s,o,!1,function(e){n("Aaxj")},"data-v-720de8da",null);t.default=i.exports}});
//# sourceMappingURL=7.0383c268fe747d125ba8.js.map