webpackJsonp([13],{m4Ix:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("gyMJ"),a=t("0XjM"),i=t.n(a);t("DmJO");function o(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function n(a,i){try{var o=r[a](i),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var s,u,c,l={components:{TreeSelect:i.a},data:function(){return{value:null,form:{id:0,name:"",parent_id:null,manager:""},departments:[]}},watch:(s={},u="form.id",c=function(e){var r=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getDepartmentDetail(e);case 2:case"end":return t.stop()}},t,r)}))()},u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,s),methods:{getDepartmentDetail:function(e){var r=this;return o(regeneratorRuntime.mark(function t(){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.sniperGetDepartmentDetail({id:e});case 2:a=t.sent,i=a.data,r.form.id=i.id,r.form.name=i.name,r.form.parent_id=i.parent_id,r.form.manager=i.manager;case 8:case"end":return t.stop()}},t,r)}))()},normalizer:function(e){return{id:e.id,label:e.name,children:e.children}},viewDepartments:function(){this.$router.push("/sniper/employee/department")},save:function(){var e=this;return o(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.saveDepartment();case 2:(t=r.sent).hasError?e.showMessage(t.error):(e.showMessage("添加成功！","success"),e.$router.push("/sniper/employee/department"));case 4:case"end":return r.stop()}},r,e)}))()},getDepartments:function(){var e=this;return o(regeneratorRuntime.mark(function r(){var t,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.a.sniperGetDepartmentsTreeSelect();case 2:t=r.sent,a=Object.values(t.data)[0],function e(r){if(r.children.length){var t=!0,n=!1,a=void 0;try{for(var i,o=r.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){e(i.value)}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}else r.children=void 0}(a),e.departments=[a];case 7:case"end":return r.stop()}},r,e)}))()},saveDepartment:function(){var e=this;return o(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.a.sniperSaveDepartment(e.form);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},r,e)}))()}},mounted:function(){var e=this;return o(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.getDepartments(),e.form.id=parseInt(e.$route.query.id)||0,(t=parseInt(e.$route.query.parent_id)||0)&&(e.form.parent_id=t);case 4:case"end":return r.stop()}},r,e)}))()}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{directives:[{name:"title",rawName:"v-title",value:"新增部门",expression:"'新增部门'"}]}),e._v(" "),t("div",{staticClass:"l-block"},[t("div",{staticClass:"l-block-header"},[t("div",{staticClass:"l-flex"},[t("span",[e._v("员工系统 / "),t("span",{staticStyle:{cursor:"pointer"},on:{click:e.viewDepartments}},[e._v("部门管理")]),e._v(" / 新增部门")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)]),e._v(" "),t("div",{staticClass:"l-block-body"},[t("el-form",{ref:"form",staticStyle:{width:"50%","overflow-y":"visible"},attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"部门名称"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上级部门"}},[t("tree-select",{attrs:{multiple:!1,options:e.departments,"default-expand-level":10,normalizer:e.normalizer},model:{value:e.form.parent_id,callback:function(r){e.$set(e.form,"parent_id",r)},expression:"form.parent_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"经    理"}},[t("el-input",{model:{value:e.form.manager,callback:function(r){e.$set(e.form,"manager",r)},expression:"form.manager"}})],1)],1)],1)])])},staticRenderFns:[]};var f=t("VU/8")(l,m,!1,function(e){t("uRAT")},"data-v-73ad6860",null);r.default=f.exports},uRAT:function(e,r){}});
//# sourceMappingURL=13.e915f6c903dfb99818cf.js.map