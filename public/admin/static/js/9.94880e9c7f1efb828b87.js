webpackJsonp([9],{Luci:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("gyMJ"),a=t("rBKV"),o=t.n(a),n=t("lbHh"),i=t.n(n),l=t("5reh");var c={data:function(){return{loading:!1,loginFont:"登录",params:{mobile:"13222988085",password:"11111111"},rules:{}}},computed:{appName:function(){return o.a.APP_NAME},accessToken:function(){return this.$store.getters.accessToken}},watch:{accessToken:function(e){console.log("access token from store:",e)}},methods:{requireMobile:function(){""==this.params.mobile?$("#mobile").addClass("error").text("input mobile"):$("#mobile").removeClass("error").text("")},requirePassword:function(){""==this.params.password?$("#password").addClass("error").text("input password"):$("#password").removeClass("error").text("")},changePassword:function(){$("#password").removeClass("error").text("")},login:function(){var e,r=this;return(e=regeneratorRuntime.mark(function e(){var t,a,o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.params.mobile&&r.params.password){e.next=5;break}r.requireMobile(),r.requirePassword(),e.next=22;break;case 5:return r.loading=!0,r.loginFont="login...",e.next=9,s.a.login(r.params);case 9:if(200!=(t=e.sent).code){e.next=20;break}return a=t.data,o=a.access_token,n=a.user,o&&r.$store.commit("accessToken",o),n&&r.$store.commit("user",n),e.next=16,r.$store.dispatch(l.default.privileges);case 16:i.a.set(r.$types.logined,!0,new Date((new Date).getTime()+6e5)),r.$router.push("/dashboard"),e.next=21;break;case 20:4011==t.code&&r.reset();case 21:r.reset();case 22:case"end":return e.stop()}},e,r)}),function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function s(a,o){try{var n=r[a](o),i=n.value}catch(e){return void t(e)}if(!n.done)return Promise.resolve(i).then(function(e){s("next",e)},function(e){s("throw",e)});e(i)}("next")})})()},reset:function(){this.loading=!1,this.loginFont="Login",this.params.password=""}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v(e._s(e.appName)+"管理系统")])]),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.params,"status-icon":"",rules:e.rules,"label-width":"0"}},[t("el-form-item",{attrs:{prop:"mobile"}},[t("label",[e._v("用户名")]),e._v(" "),t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.params.mobile,callback:function(r){e.$set(e.params,"mobile",r)},expression:"params.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("label",[e._v("密码")]),e._v(" "),t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.params.password,callback:function(r){e.$set(e.params,"password",r)},expression:"params.password"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"medium",loading:e.loading,type:"primary"},on:{click:e.login}},[e._v(e._s(e.loginFont))])],1)],1)],1)},staticRenderFns:[]};var p=t("VU/8")(c,u,!1,function(e){t("slxx")},"data-v-c5cea01a",null);r.default=p.exports},slxx:function(e,r){}});
//# sourceMappingURL=9.94880e9c7f1efb828b87.js.map