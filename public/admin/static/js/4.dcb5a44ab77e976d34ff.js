webpackJsonp([4],{Hl9I:function(t,e){},OMkM:function(t,e){},rh17:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),s=n("exGp"),c=n.n(s),o=n("Dd8w"),i=n.n(o),l=n("w+Hh"),u=n("Pgpu"),d=n.n(u),p=n("trTH"),h=n("FO7G"),f=n("M+9c"),v={props:{total:{type:Number,default:1},pageSize:{type:Number,default:15}},methods:{currentChange:function(t){this.$emit("current-change",t)}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ls-pager"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":this.pageSize,total:this.total},on:{"current-change":this.currentChange}})],1)},staticRenderFns:[]};var C=n("VU/8")(v,m,!1,function(t){n("OMkM")},"data-v-1c1e7ddf",null).exports,_=n("NYxO"),g=n("gyMJ"),w={data:function(){return{checkList:[],showSwitch:!1,contents:[],showForm:!1,formTitle:"添加文章",form:{positions:[]},ueditorConfig:p.a,contentPositions:[],channel_id:0,page:1,page_size:8,total:0}},components:{"channel-tree":l.a,VueUeditorWrap:d.a,imageUpload:h.a,multipleImageUpload:f.a,pager:C},computed:i()({},Object(_.b)(["parentChannel","currentChannel","currentModel"])),watch:{currentChannel:function(t,e){this.loadContents()},showForm:function(){this.$store.dispatch("collapse")},channel_id:function(t){var e=this;return c()(r.a.mark(function n(){var a,s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=8;break}return e.page=1,n.next=4,g.a.getCmsChannelWhole({id:t});case 4:a=n.sent,s=a.data,e.$store.dispatch(e.$types.CMS_CURRENT_CHANNEL,s),e.$store.dispatch(e.$types.CMS_PARENT_CHANNEL,s);case 8:case"end":return n.stop()}},n,e)}))()}},methods:{goback:function(){this.showForm=!1},editContent:function(t){var e=this;return c()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.$router.push("/cms/content/edit?content_id="+t.id);case 1:case"end":return n.stop()}},n,e)}))()},deleteContent:function(t){var e=this;this.$confirm("确定删除文章?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.deleteContent({id:t.id});case 2:return n.sent,e.$message({type:"success",message:"删除成功!"}),n.next=6,e.loadContents();case 6:case"end":return n.stop()}},n,e)})))},handleNodeClick:function(t){var e=this;return c()(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.showForm=!1,a=t[0],e.channel_id=a.id;case 3:case"end":return n.stop()}},n,e)}))()},addContent:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$router.push("/cms/content/add?channel_id="+t.currentChannel.id);case 1:case"end":return e.stop()}},e,t)}))()},loadContents:function(){var t=this;return c()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getChannelContents({channel_id:t.channel_id,page:t.page,page_size:t.page_size});case 2:n=e.sent,a=n.data,t.contents=a.contents,t.total=a.total;case 6:case"end":return e.stop()}},e,t)}))()},currentChange:function(t){var e=this;return c()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.page=t,e.loadContents();case 2:case"end":return n.stop()}},n,e)}))()}},created:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("current meta:",t.$route.meta),t.channel_id=parseInt(t.$route.query.channel_id||0),e.next=4,t.loadContents();case 4:t.$store.dispatch("collapse");case 5:case"end":return e.stop()}},e,t)}))()}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"l-content-list"},[n("div",{directives:[{name:"title",rawName:"v-title",value:"内容管理",expression:"'内容管理'"}]}),t._v(" "),n("channel-tree",{attrs:{selectedKey:t.channel_id},on:{nodeClick:t.handleNodeClick}}),t._v(" "),n("div",{staticClass:"l-tree-content"},[t.showForm?t._e():n("div",{staticClass:"l-block"},[t.parentChannel?n("div",{staticClass:"l-block-header"},[n("div",[n("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "+t._s(t.parentChannel.hasOwnProperty("name")?t.parentChannel.name:"")+" "),n("span",{staticStyle:{color:"white"}},[t._v(t._s(t.parentChannel.id))])]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addContent}},[t._v("新增")])],1):t._e(),t._v(" "),n("div",{staticClass:"l-block-body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.contents}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"channel.name",label:"栏目"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editContent(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.deleteContent(e.row)}}},[t._v("删除")])]}}],null,!1,3534639574)})],1),t._v(" "),n("pager",{attrs:{total:t.total,"page-size":t.page_size},on:{"current-change":t.currentChange}})],1)])])],1)},staticRenderFns:[]};var k=n("VU/8")(w,b,!1,function(t){n("Hl9I")},"data-v-57c4dc6e",null);e.default=k.exports}});
//# sourceMappingURL=4.dcb5a44ab77e976d34ff.js.map